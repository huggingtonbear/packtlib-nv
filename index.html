<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet " href="css/bootstrap.min.css">
    <link rel="stylesheet " href="css/font-awesome.min.css">
    <link rel="stylesheet " href="css/docs.css">
    <link href='http://fonts.googleapis.com/css?family=Raleway:400,700' rel='stylesheet' type='text/css'>
    <title>JavaScript and JSON Essentials</title>
</head>

<body data-spy="scroll" data-target=".scrollspy">
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#"><img src="http://www.packtpub.com/sites/default/files/packt_logo.png" class="img-responsive"></a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Library <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="#">Dashboard</a></li>
            <li><a href="#">Collection</a></li>
            <li><a href="#">Owned</a></li>
            <li><a href="#">Playlists</a></li>
            <li><a href="#">Bookmarks</a></li>
          </ul>
        </li>
        
      </ul>
      <form class="navbar-form navbar-left" role="search">
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Search courses...">
        </div>
      </form>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="#">Store</a></li>
        <li class="active"><a href="#">Currently Viewing <span class="sr-only">(current)</span></a></li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Signed in as Oli <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="#">View Account</a></li>
            <li><a href="#">Licences</a></li>
            <li><a href="#">Subscriptions</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="#">Logout</a></li>
          </ul>
        </li>
      </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
  <div class="jumbotron">
    <div class="container">
        <div class="col-sm-3 hidden-sm hidden-xs">
            <img src="https://www.packtpub.com/sites/default/files/imagecache/ppv4_main_book_cover/6034OS.jpg" class="img-responsive"/>
        </div>
        <div class="col-md-9">
              <h1>JavaScript and JSON Essentials</h1>
              <ul class="hidden-xs">
                  <li><h3> Deploy JSON across various domains</h3></li>
                  <li><h3> Facilitate metadata storage with JSON</h3></li>
                  <li><h3> Build a practical data-driven web application with JSON</h3></li>
            </ul>
        </div>
    
    </div>
   
    
  </div><!--end of .jumbotron-->
  <div class="jumbotron hidden-xs" style="background:#F5F5F5;">
    <div class="container">
        <div class="btn-group btn-group-lg" >
      <button type="button" class="btn btn-default"><i class="fa fa-download fa-3" style="margin-right:5px;"></i> Download eBook</button>
      <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        <span class="caret"></span>
        <span class="sr-only">Toggle Dropdown</span>
      </button>
      <ul class="dropdown-menu">
        <li><a href="#">Download ePub</a></li>
        <li><a href="#">Download Nook</a></li>
        <li><a href="#">Download PDF</a></li>
      </ul>
    </div>
     <button type="button" class="btn btn-default btn-lg"><i class="fa fa-code-fork fa-3" style="margin-right:5px;"></i> Fork Project Files</button>
         <div class="btn-group btn-group-lg" role="group" aria-label="..." >
              <button type="button" class="btn btn-default"><i class="fa fa-plus fa-3"></i> Add to Collection</button>
              <button type="button" class="btn btn-default"><i class="fa fa-moon-o fa-lg"></i></button>
              <button type="button" class="btn btn-default"><i class="fa fa-font fa-lg"></i></button>
        </div>
    </div>
  </div>

  <div class="container">
    <div class="row">

      

      <div class="col-md-9 col-lg-8 book">
        <!-- Book Content Starts -->
        <section id="pref05">

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Preface</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="preface" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="pref05"></a>Preface</h2></div></div></div><p><span class="emphasis"><em>JavaScript and JSON Essentials</em></span> is a one-stop resource that can be used for understanding and implementing JSON in various web applications. This book provides a comprehensive insight into how JSON can be implemented and integrated into your applications. Though JSON is one of the most popular data-exchange formats, the number of books available describing JSON and helping readers build a live solution is not high. This book is a comprehensive guide to JSON that begins with JavaScript basics, discusses the history of JSON, and then takes a step-by-step approach towards using JSON to build a live web application that is powered by JSON data.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch00lvl1sec02"></a>What this book covers</h2></div></div></div><p><a class="link ng-scope" href="#" linkend="ch01" ng-click="changePageInner($event)">Chapter 1</a>, <span class="emphasis"><em>JavaScript Basics</em></span>, is a basic refresher for common JavaScript concepts.</p><p><a class="link ng-scope" href="#" linkend="ch02" ng-click="changePageInner($event)">Chapter 2</a>, <span class="emphasis"><em>Getting Started with JSON</em></span>, introduces the audience to JSON, discusses the history of JSON, outlines the popular programming languages that support JSON, fires a Hello World program in JSON, and writes basic programs with different data types in JSON.</p><p><a class="link ng-scope" href="#" linkend="ch03" ng-click="changePageInner($event)">Chapter 3</a>, <span class="emphasis"><em>Working with Real-time JSON</em></span>, introduces the audience to complex JSON. The JSON used in this chapter will consist of multiple datatypes and multiple objects and will be multidimensional.</p><p><a class="link ng-scope" href="#" linkend="ch04" ng-click="changePageInner($event)">Chapter 4</a>, <span class="emphasis"><em>AJAX Calls with JSON Data</em></span>, goes over the requirements to successfully pass JSON over HTTP as JSON data has to transported over HTTP in real-world scenarios.</p><p><a class="link ng-scope" href="#" linkend="ch05" ng-click="changePageInner($event)">Chapter 5</a>, <span class="emphasis"><em>Cross-domain Asynchronous Requests</em></span>, introduces the audience to the concept of making asynchronous calls across domains. Since data is being transported across domains, users will be introduced to the concept of JSON with Padding.</p><p><a class="link ng-scope" href="#" linkend="ch06" ng-click="changePageInner($event)">Chapter 6</a>, <span class="emphasis"><em>Building the Carousel Application</em></span>, discusses the idea of a Carousel application and the required setup and dependencies such as, jQuery library, and jQuery Cycle plugin for the application.</p><p><a class="link ng-scope" href="#" linkend="ch07" ng-click="changePageInner($event)">Chapter 7</a>, <span class="emphasis"><em>Alternate Implementations of JSON</em></span>, discusses the non web-development implementation of JSON such as dependency managers, metadata stores, and configuration stores. The discussion would go forward and talk about the advantages of JSON over XML and YAML.</p><p><a class="link ng-scope" href="#" linkend="ch08" ng-click="changePageInner($event)">Chapter 8</a>, <span class="emphasis"><em>Debugging JSON</em></span>, introduces the powerful tools that are available to debug, validate, and format JSON. As the number of objects increases, the length of JSON increases too, which makes it difficult for the naked eye to validate JSON.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch00lvl1sec03"></a>What you need for this book</h2></div></div></div><p>JSON is language-and platform-independent, so readers can use an operating system of their choice. To serve live JSON, we need a live web server. There are parsers available for most of the popular server-side languages; readers can use a web server such as Apache, Tomcat, IIS, or any other web server and can pick a text editor of their choice.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch00lvl1sec04"></a>Who this book is for</h2></div></div></div><p>This book has been designed to cater to the needs of developers at all levels. This book contains numerous working examples, tips, and notes that will guide users through all the chapters. It is not required but would be good to have some knowledge about HTML and JavaScript. Some familiarity with server-side languages such as PHP, C#, or Python would be preferred, but not required.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch00lvl1sec05"></a>Conventions</h2></div></div></div><p>In this book, you will find a number of styles of text that distinguish between different kinds of information. Here are some examples of these styles, and an explanation of their meaning.</p><p>Code and the output being generated by the code are added to the book as screenshots. The name of the file will be shown as follows:.</p><p><code class="literal">json_helloworld.html</code></p><p><span class="strong"><strong>New terms</strong></span> and <span class="strong"><strong>important words</strong></span> are shown in bold. Words that you see on the screen, in menus or dialog boxes for example, appear in the text like this: “Load the file in a web browser, and a pop-up box with the text <span class="strong"><strong>Hello World!</strong></span> should be loaded on the page”.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note01"></a>Note</h3><p>Warnings or important notes appear in a box like this.</p></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip01"></a>Tip</h3><p>Tips and tricks appear like this.</p></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch00lvl1sec06"></a>Reader feedback</h2></div></div></div><p>Feedback from our readers is always welcome. Let us know what you think about this book—what you liked or may have disliked. Reader feedback is important for us to develop titles that you really get the most out of.</p><p>To send us general feedback, simply send an e-mail to <code class="email">&lt;<a class="email" href="mailto:feedback@packtpub.com">feedback@packtpub.com</a>&gt;</code>, and mention the book title via the subject of your message.</p><p>If there is a topic that you have expertise in and you are interested in either writing or contributing to a book, see our author guide on <a class="ulink" href="http://www.packtpub.com/authors" target="_blank">www.packtpub.com/authors</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch00lvl1sec07"></a>Customer support</h2></div></div></div><p>Now that you are the proud owner of a Packt book, we have a number of things to help you to get the most from your purchase.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch00lvl2sec02"></a>Downloading the example code</h3></div></div></div><p>You can download the example code files for all Packt books you have purchased from your account at <a class="ulink" href="http://www.packtpub.com" target="_blank">http://www.packtpub.com</a>. If you purchased this book elsewhere, you can visit <a class="ulink" href="http://www.packtpub.com/support" target="_blank">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch00lvl2sec03"></a>Errata</h3></div></div></div><p>Although we have taken every care to ensure the accuracy of our content, mistakes do happen. If you find a mistake in one of our books—maybe a mistake in the text or the code—we would be grateful if you would report this to us. By doing so, you can save other readers from frustration and help us improve subsequent versions of this book. If you find any errata, please report them by visiting <a class="ulink" href="http://www.packtpub.com/submit-errata" target="_blank">http://www.packtpub.com/submit-errata</a>, selecting your book, clicking on the <span class="strong"><strong>errata</strong></span> <span class="strong"><strong>submission</strong></span> <span class="strong"><strong>form</strong></span> link, and entering the details of your errata. Once your errata are verified, your submission will be accepted and the errata will be uploaded on our website, or added to any list of existing errata, under the Errata section of that title. Any existing errata can be viewed by selecting your title from <a class="ulink" href="http://www.packtpub.com/support" target="_blank">http://www.packtpub.com/support</a>.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch00lvl2sec04"></a>Piracy</h3></div></div></div><p>Piracy of copyright material on the Internet is an ongoing problem across all media. At Packt, we take the protection of our copyright and licenses very seriously. If you come across any illegal copies of our works, in any form, on the Internet, please provide us with the location address or website name immediately so that we can pursue a remedy.</p><p>Please contact us at <code class="email">&lt;<a class="email" href="mailto:copyright@packtpub.com">copyright@packtpub.com</a>&gt;</code> with a link to the suspected pirated material.</p><p>We appreciate your help in protecting our authors, and our ability to bring you valuable content.</p></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch00lvl2sec05"></a>Questions</h3></div></div></div><p>You can contact us at <code class="email">&lt;<a class="email" href="mailto:questions@packtpub.com">questions@packtpub.com</a>&gt;</code> if you are having a problem with any aspect of the book, and we will do our best to address it.</p></div></div></div>
        </section>
        <section id="ch01">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Chapter&nbsp;1.&nbsp;JavaScript Basics</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="ch01"></a>Chapter&nbsp;1.&nbsp;JavaScript Basics</h2></div></div></div><p>JavaScript, which was introduced as LiveScript by Netscape Communications Corp, has grown leaps and bounds in the last few years. JavaScript was originally developed to make web pages more interactive, and control the behavior of the page. JavaScript programs are commonly embedded inside an <a id="id0" class="indexterm"></a>HTML file. HTML is a markup <a id="id1" class="indexterm"></a>language, and does not manipulate the behavior of a page once its loaded. Using JavaScript, web developers can set rules and verify if the rules were followed, avoiding any remote server resources for input validation or complex number crunching. Today JavaScript is not just used for basic input validation; it is used to access the browser's <code class="literal">Document</code> object, to make asynchronous calls to the web server, and to develop end-to-end web applications using software platforms such as <code class="literal">Node.JS</code>, which is powered by Google's v8 JavaScript engine.</p><p>JavaScript is considered to be one of the three building blocks that are required to create interactive web pages; it is the only programming language in the trinity that is HTML, CSS, and JavaScript. JavaScript is a case sensitive and a space insensitive language, unlike Python and Ruby. A JavaScript program is a collection of statements and those statements have to be included inside the <a id="id2" class="indexterm"></a>&lt;script&gt;&gt; tags.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_01_01.jpg" class="img-responsive"></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="tip02"></a>Tip</h3><p><span class="strong"><strong>Downloading the example code</strong></span></p><p>You can download the example code files for all Packt books you have purchased from your account at <a class="ulink" href="http://www.packtpub.com" target="_blank">http://www.packtpub.com</a>. If you purchased this book elsewhere, you can visit <a class="ulink" href="http://www.packtpub.com/support" target="_blank">http://www.packtpub.com/support</a> and register to have the files e-mailed directly to you.</p></div><p>JavaScript has to be invoked from another <a id="id3" class="indexterm"></a>application such as a browser. Browsers have a built-in JavaScript engine that interprets and executes the JavaScript on the webpage. The interpretation of JavaScript is from top to bottom and goes from left to right. SpiderMonkey and Rhino are few of the early JavaScript engines that were implemented by different browsers, such as Netscape Navigator and Mozilla Firefox.</p><p>Next is our simple Hello World <a id="id4" class="indexterm"></a>program; the JavaScript program is in between <a id="id5" class="indexterm"></a>the <code class="literal">&lt;script&gt;</code> tags in the head section. The script tags can either be added to the head tag or to the body tag. As JavaScript is not non-blocking, the scripts hold the page until they are loaded. It is common to see the scripts being loaded at the end; this would work if there were no dependencies to other files or elements. One such example of a dependency would be a library that is used from a different location. We will be looking at a lot of these examples in the later chapters. We will be discussing the role of Unobtrusive JavaScript at a later point. For our Hello World program, use a text editor of your choice, and save this program with an HTML extension. Load the file in a web browser, and a pop-up box with the text <span class="strong"><strong>Hello World!</strong></span> should be loaded on the page.</p><p>The following code snippet is <a id="id6" class="indexterm"></a>the <a id="id7" class="indexterm"></a>
        <code class="literal">first_script.html</code> file:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_01_02.jpg" class="img-responsive"></div><p>The output is as follows:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_01_03.jpg" class="img-responsive"></div></div>
        </section>
        <section id="ch01lvl1sec08">

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Variables in JavaScript</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec08"></a>Variables in JavaScript</h2></div></div><hr></div><p>Now that we have built a Hello <a id="id8" class="indexterm"></a>World program, let us take the next step and perform a few <a id="id9" class="indexterm"></a>arithmetic operations on two numbers.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note02"></a>Note</h3><p>The semi colon (<code class="literal">;</code>) is a <a id="id10" class="indexterm"></a>statement terminator, it tellsthe JavaScript engine that a statement has ended.</p></div><p>Let us take a look at another program, <a id="id11" class="indexterm"></a>
        <code class="literal">alert_script.html</code>:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_01_04.jpg" class="img-responsive"></div><p>The previous program would run and produce four pop-up windows, one after the other, displaying their respective values. A glaring problem here is that we are repetitively using the same numbers in multiple places. If we had to perform these arithmetic operations on a different set of numbers, we would have had to replace them at multiple locations. To avoid this situation, we would assign those numbers to temporary storage locations; these storage locations are often referred to as variables.</p><p>The keyword <code class="literal">var</code> is used to declare a <a id="id12" class="indexterm"></a>variable in JavaScript, <a id="id13" class="indexterm"></a>followed by the name of <a id="id14" class="indexterm"></a>that variable. The name is then implicitly provided with a piece of computer memory, which we will use throughout the program execution. Let us take a quick look at how variables will make the earlier program more flexible:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_01_05.jpg" class="img-responsive"></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note03"></a>Note</h3><p>Code commenting can be done in <a id="id15" class="indexterm"></a>two ways: one is single line, and the <a id="id16" class="indexterm"></a>other is multiline.</p><p>Single <a id="id17" class="indexterm"></a>line <a id="id18" class="indexterm"></a>comments:</p><div class="informalexample"><pre class="programlisting  language-markup">//This program would alert the sum of 5 and 3;
        alert(5+3);</pre></div><p>Multiline <a id="id19" class="indexterm"></a>comments:</p><div class="informalexample"><pre class="programlisting  language-markup">/* This program would generate two alerts, the first alert would display the sum of 5 and 3, and the second alert would display the difference of 5 and 3 */
        alert(5+3);
        alert(5-3);</pre></div></div><p>Let us continue with the program:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_01_06.jpg" class="img-responsive"></div><p>Now let us alter the value from <code class="literal">5</code> to <code class="literal">6</code>; the amount of change that we will make here is minimal. We assign the value of <code class="literal">6</code> to our variable <code class="literal">a</code>, and that takes care of the rest of the process; unlike our earlier script where changes were made in multiple locations. This is shown as follows:</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note05"></a>Note</h3><p>Code commenting is a recurring <a id="id20" class="indexterm"></a>and an extremely important step in the development life cycle of any application. It has to be used to explain any assumptions and/or any dependencies that our code contains.</p></div><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_01_07.jpg" class="img-responsive"></div><p>In JavaScript, we declare a variable by using the keyword <code class="literal">var</code> and until a value is assigned to it, the value of the variable <a id="id21" class="indexterm"></a>will be implicitly set to <code class="literal">undefined</code>; that value is overwritten on variable initialization.</p></div>
        </section>
        <section id="ch01lvl1sec09">

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Arrays</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec09"></a>Arrays</h2></div></div><hr></div><p>Variables are good to hold single values, <a id="id22" class="indexterm"></a>but for cases where a variable should contain multiple values, we would have to rely on arrays. A JavaScript array is a collection of items arranged in an order, according to their index. Each item, in the array, is an element and has an index, which is used to access that element. Arrays are like a bookshelf that holds more than one book; each book having its unique location. Arrays are declared using the array literal notation <code class="literal">[]</code>.</p><p>Let us look at a simple <a id="id23" class="indexterm"></a>array declaration:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_01_08.jpg" class="img-responsive"></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note06"></a>Note</h3><p>Arrays in JavaScript <a id="id24" class="indexterm"></a>are zero based.</p></div><p>Let us initialize the <a id="id25" class="indexterm"></a>array:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_01_09.jpg" class="img-responsive"></div><p>To access the value of a specific element, the reference index of that element is used. Once the reference index is identified, <a id="id26" class="indexterm"></a>it can be outputted using the alert statement, as shown in the following screenshot:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_01_10.jpg" class="img-responsive"></div><p>Unlike variables, arrays are not typed, therefore, they can contain various types of data, as shown in the following screenshot:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_01_11.jpg" class="img-responsive"></div><p>A much more complex example of a <a id="id27" class="indexterm"></a>JavaScript array is a multidimensional array, where there is a combination of arrays inside an array, as seen in the following screenshot:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_01_12.jpg" class="img-responsive"></div><p>To retrieve an element from a <a id="id28" class="indexterm"></a>multidimensional array, we would have to use as many indexes as the levels in that array. If the multidimensional array contains an array that has the values that we want to access, we will have to choose the index where the array element exists, and then choose the index of the value inside the array that we are searching for. To retrieve the string <code class="literal">Three</code> from the <code class="literal">multidimensionalArray</code> example, we will have to first locate the index of the array containing the value <code class="literal">Three</code>, and then find the index of the value <code class="literal">Three</code> inside that array. This is shown as follows:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_01_13.jpg" class="img-responsive"></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note07"></a>Note</h3><p>The second way of declaring <a id="id29" class="indexterm"></a>an array is <a id="id30" class="indexterm"></a>by using the <code class="literal">Array</code> class.</p><div class="informalexample"><pre class="programlisting  language-markup">var bookshelf = new Array()</pre></div></div></div>
        </section>
        <section id="ch01lvl1sec10"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Objects</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec10"></a>Objects</h2></div></div><hr></div><p>Objects are another way of handling <a id="id31" class="indexterm"></a>data. In arrays the indexes are commonly numerical; objects give us a robust way of assigning and retrieving data. Objects are derived from the object-oriented programming concept; a programming paradigm that is very popular. Objects are a virtual representation of real-time data; they allow us to organize our data into logical groups via properties and methods. Properties describe the state of the object, while methods describe the behavior of the object. Properties are a key-value pair that holds the information. Take a look at the following:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_01_14.jpg" class="img-responsive"></div><p>In the previous example, we have instantiated a <code class="literal">person</code> object, and then added the <code class="literal">firstname</code> and <code class="literal">lastname</code> properties that described the object. We added behavior to the object by creating a method called <a id="id32" class="indexterm"></a>
        <code class="literal">getFullName</code>, the method accessed the object properties, retrieved the data, and alerted the output onto the screen. In this example the properties are accessed by the dot notation; we could also access a property by putting the property name in square brackets similar to an array, but it is not popular. This is shown as follows:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_01_15.jpg" class="img-responsive"></div><p>The second way of creating an object is by using the curly braces. Here we are introduced to the <code class="literal">this</code> keyword, which provides a <a id="id33" class="indexterm"></a>reference to the object's properties and methods, as shown in the following:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_01_16.jpg" class="img-responsive"></div></div>
        </section>
        <section id="ch01lvl1sec11"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>The Carousel application</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec11"></a>The Carousel application</h2></div></div><hr></div><p>We will be working on a Carousel <a id="id34" class="indexterm"></a>application, which is powered by a JSON feed. We will be using HTML, JavaScript, and JSON to build this application. This application will have its very own navigation system coupled with a timer event in the background, which will rotate the items at a given interval. We will also be discussing how user experience plays an important role in developing such an application.</p></div>
        </section>
        <section id="ch01lvl1sec12"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Summary</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch01lvl1sec12"></a>Summary</h2></div></div><hr></div><p>This chapter is a basic introduction to the principles of JavaScript that we will be utilizing in our journey towards mastering JSON. Variables, arrays, and objects play a very important role in carrying the data across the network. If this is your first encounter with JavaScript, go through the examples another time and practice them. We will need a strong foundation in order to build a solid understanding of JSON, and how it can be used in real-time web applications.</p></div>
        </section>
        <section id="ch02"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Chapter&nbsp;2.&nbsp;Getting Started with JSON</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="ch02"></a>Chapter&nbsp;2.&nbsp;Getting Started with JSON</h2></div></div></div><p>JSON or JavaScript Object Notation is a very popular data interchange format. It was developed by Douglas Crockford. JSON is text-based, lightweight, and a <a id="id35" class="indexterm"></a>human-readable format for data exchange between clients and servers. JSON is derived from JavaScript and bears a close resemblance to JavaScript objects, but it is not dependent on JavaScript. JSON is language-independent, and support for the JSON data format is available in all the popular languages, some of which are C#, PHP, Java, C++, Python, and Ruby.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note08"></a>Note</h3><p>JSON is a format and not a language.</p></div><p>JSON can be used in web applications for data transfer. Prior to JSON, XML was considered to be the chosen data interchange format. XML parsing required an XML DOM implementation on the client side that would ingest the XML response, and then XPath was used to query the response in order to access and retrieve the data. That made life tedious, as querying for data had to be performed at two levels: first on the server side where the data was being queried from a database, and the second time was on the client side using XPath. JSON does not need any specific implementations; the JavaScript engine in the browser handles JSON parsing.</p><p>XML messages <a id="id36" class="indexterm"></a>often <a id="id37" class="indexterm"></a>tend to be heavy and verbose, and take up a lot of bandwidth while sending the data over a network connection. Once the XML message is retrieved, it has to be loaded into memory to parse it; let us take a look at a <code class="literal">students</code> data feed in XML and JSON.</p><p>The following is an example in XML:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_01.jpg" class="img-responsive"></div><p>Let us take a look at the <a id="id38" class="indexterm"></a>example in JSON:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_02.jpg" class="img-responsive"></div><p>As we notice, the size of the XML message is bigger when compared to its JSON counterpart, and this is just for two records. A real-time feed will begin with a few thousands and go upwards. Another point to note is the amount of data that has to be generated by the server and then transmitted over the Internet is already big, and XML, as it is verbose, makes it bigger. Given that we are in the age of mobile devices where smart phones and tablets are getting more and more popular by the day, transmitting such large volumes of data on a slower network causes slow page loads, hang ups, and poor user experience, thus driving the users away from the site. JSON has come about to be the preferred Internet data interchange format, <a id="id39" class="indexterm"></a>to avoid the issues mentioned earlier.</p><p>Since JSON is used to transmit serialized data over the Internet, we will need to make a note of its MIME type. A <a id="id40" class="indexterm"></a>
        <span class="strong"><strong>MIME</strong></span> (<span class="strong"><strong>Multipurpose Internet Mail Extensions</strong></span>) type is an Internet media type, which is a two-part identifier for content that is being transferred over the Internet. The MIME types are passed through the HTTP headers of an HTTP Request and an HTTP Response. The MIME type is the communication of content type between the server and the browser. In general, a MIME type will have two or more parts that give the browser information about the type of data that is being sent either in the HTTP Request or in the HTTP Response. The MIME type for JSON data is <code class="literal">application/json</code>. If the MIME type headers are not sent across the browser, it treats the incoming JSON as plain text.</p></div>
        </section>
        <section id="ch02lvl1sec13"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>The Hello World program with JSON</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec13"></a>The Hello World program with JSON</h2></div></div><hr></div><p>Now that we have a basic <a id="id41" class="indexterm"></a>understanding of JSON, let us work on our Hello World <a id="id42" class="indexterm"></a>program. This is shown in the screenshot that follows:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_03.jpg" class="img-responsive"></div><p>The preceding program will alert World onto the screen when it is invoked from a browser. Let us pay close attention to <a id="id43" class="indexterm"></a>the script between the <code class="literal">&lt;script&gt;</code> tags.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_04.jpg" class="img-responsive"></div><p>In the first step, we are creating a JavaScript variable and initializing the variable with a JavaScript object. Similar to how we retrieve data from a JavaScript object, we use the key-value pair to retrieve the value. Simply put, JSON is a collection of key and value pairs, where every key is a reference to <a id="id44" class="indexterm"></a>the memory location where the value is stored on the computer. Now let us take a step back and analyze why we need JSON, if all we are doing is assigning JavaScript objects that are readily available. The answer is, JSON is a different format altogether, unlike JavaScript, which is a language.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note09"></a>Note</h3><p>JSON keys and values have to be enclosed in double quotes, if either are enclosed in single quotes, we will receive an error.</p></div><p>Now, let us take a <a id="id45" class="indexterm"></a>quick look at the similarities and <a id="id46" class="indexterm"></a>differences between JSON and a normal JavaScript object. If we were to create a similar JavaScript object like our <code class="literal">hello_world</code> JSON <a id="id47" class="indexterm"></a>variable from the earlier example, it would look like the JavaScript object that follows:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_05.jpg" class="img-responsive"></div><p>The big difference here is that the key is not wrapped in double quotes. Since a JSON key is a string, we can use any valid string for <a id="id48" class="indexterm"></a>a key. We can use spaces, special characters, and hyphens in our keys, which is not <a id="id49" class="indexterm"></a>valid in a normal JavaScript object.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_06.jpg" class="img-responsive"></div><p>When we use special characters, hyphens, or spaces in our keys, we have to be careful while accessing them.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_07.jpg" class="img-responsive"></div><p>The reason the preceding JavaScript statement doesn't work is that JavaScript doesn't accept keys with special characters, hyphens, or strings. So we have to retrieve the data using a method where we will handle the JSON object as an associative array with a string key. This is shown in the screenshot that follows:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_08.jpg" class="img-responsive"></div><p>Another difference between the two is that a JavaScript object can carry functions within, while a JSON object cannot carry any functions. The example that follows has the property <code class="literal">getName</code>, which has a function that <a id="id50" class="indexterm"></a>alerts the name <code class="literal">John Doe</code> when it is invoked:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_09.jpg" class="img-responsive"></div><p>Finally, the biggest difference is that a JavaScript object was never intended to be a data interchange format, while the sole <a id="id51" class="indexterm"></a>purpose of JSON was to use it as a data interchange format.</p></div>
        </section>
        <section id="ch02lvl1sec14"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Datatypes in JSON</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec14"></a>Datatypes in JSON</h2></div></div><hr></div><p>Now, let us take a look at a <a id="id52" class="indexterm"></a>more complex example of JSON. We'll also go over all the datatypes that <a id="id53" class="indexterm"></a>are supported by JSON. JSON supports six datatypes: strings, numbers, Booleans, arrays, objects, and null.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_10.jpg" class="img-responsive"></div><p>In the preceding example, we have five key-value pairs of different datatypes. Now let us take a close look at each of these key-value pairs:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_11.jpg" class="img-responsive"></div><p>The datatype of the value that <code class="literal">"id"</code> <a id="id54" class="indexterm"></a>references is a number.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_12.jpg" class="img-responsive"></div><p>Here, the datatype of the value that <code class="literal">"name"</code> <a id="id55" class="indexterm"></a>references is a string.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_13.jpg" class="img-responsive"></div><p>In the preceding screenshot, the datatype of the value that <code class="literal">"isStudent"</code> references is a Boolean.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_14.jpg" class="img-responsive"></div><p>The datatype of the value that <code class="literal">"scores"</code> references here is an array.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_15.jpg" class="img-responsive"></div><p>Here the datatype of the value that <code class="literal">"courses"</code> references is an object.</p><p>We know that JSON supports six datatypes; they are strings, numbers, Booleans, arrays, objects, and null. Yes, JSON supports null data, and real-time business implementations need accurate information. There might <a id="id56" class="indexterm"></a>be cases where null was substituted with an empty string, but that is inaccurate. <a id="id57" class="indexterm"></a>Let us take a quick look at the following example:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_16.jpg" class="img-responsive"></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note10"></a>Note</h3><p>Arrays and null values are objects in JavaScript.</p></div><p>In the earlier example, we are using the <code class="literal">typeof</code> operator that takes an operand, and returns the datatype of that operand. On line 4, we are determining the type of an empty string, while on line 8 we are determining the type of a null value.</p><p>Now, let us implement our JSON object in a page and retrieve the values, as shown in the following screenshot:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_17.jpg" class="img-responsive"></div><p>To retrieve the <code class="literal">id</code> <a id="id58" class="indexterm"></a>from the <a id="id59" class="indexterm"></a>variable <code class="literal">complexJson</code>, we need to do the following:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_18.jpg" class="img-responsive"></div><p>To retrieve the <code class="literal">name</code> from the variable <code class="literal">complexJson</code>, look at the screenshot that is shown:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_19.jpg" class="img-responsive"></div><p>Look at the following screenshot to retrieve <code class="literal">isStudent</code> from the variable <code class="literal">complexJson</code>:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_20.jpg" class="img-responsive"></div><p>Retrieving data from arrays and objects <a id="id60" class="indexterm"></a>gets a little tricky, as we have to traverse through the array or <a id="id61" class="indexterm"></a>object. Let us see how values can be retrieved from arrays:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_21.jpg" class="img-responsive"></div><p>In the preceding example, we are retrieving the second element from the <code class="literal">scores</code> array. Although <code class="literal">scores</code> is an array inside the <code class="literal">complexJson</code> object, it is still treated as a regular key-value pair. It is handled differently when the key is accessed; the first thing that the interpreter has to assess, when a key is accessed, is to get the datatype of its value. If the retrieved value is a string, number, Boolean, or null, there will not be any extra operations that are performed on the value. But if it is an array or an object, the value's dependencies are taken into consideration.</p><p>To retrieve an element from the object inside a JSON object, we will have to access the key that is the reference for that value, as shown:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_22.jpg" class="img-responsive"></div><p>Since objects do not have a numeric index, JavaScript might rearrange the order of items inside an object. If you notice that the <a id="id62" class="indexterm"></a>order of key-value pairs during the initialization of the JSON <a id="id63" class="indexterm"></a>object is different from when you are accessing the data, there is nothing to worry about. There is no loss of data; the JavaScript engine has just reordered your object.</p></div>
        </section>
        <section id="ch02lvl1sec15"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Languages that support JSON</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec15"></a>Languages that support JSON</h2></div></div><hr></div><p>Until now, we have seen how the <a id="id64" class="indexterm"></a>parsers in JavaScript support JSON. There are many other programming languages that provide implementations for JSON. Languages such as PHP, Python, C#, C++, and Java provide a very good support for the JSON data interchange format. All of the popular programming languages that support service-oriented architecture have understood the importance of JSON and its implementation for data transfer, thus, they have provided great support for JSON. Let us take a quick detour from implementing JSON in JavaScript, and see how JSON is implemented in other languages, such as PHP and Python.</p><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec06"></a>PHP</h3></div></div></div><p>PHP is considered to be one of the <a id="id65" class="indexterm"></a>most popular languages for building web applications. It is a server-side scripting language that allows developers to build applications that can perform operations on the server, connect to a database to perform CRUD (Create, Read, Update, Delete) operations, and provide a stately environment for real-time applications. <a id="id66" class="indexterm"></a>JSON support has been built into the PHP core from PHP 5.2.0; this helps users avoid going through any complex installations or configurations. Given that JSON is just a data interchange format, PHP consists of two functions. These functions handle JSON that comes in via a request or generate JSON that will be sent via a response. PHP is a weakly-typed language; for this example, we will use the data stored in a PHP array and convert that data into a JSON string, which can be utilized as a data feed. Let us recreate the student example that we have used in an earlier section, build it in PHP, and convert it into JSON.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note11"></a>Note</h3><p>This example is only intended to show you how JSON can be generated using PHP.</p></div><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_23.jpg" class="img-responsive"></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note12"></a>Note</h3><p>To run a PHP script, <a id="id67" class="indexterm"></a>we will need to install PHP. To run a PHP script through a browser, we will need a web server, such as Apache or IIS. We will go through the installation in <a class="link ng-scope" href="#" linkend="ch04" ng-click="changePageInner($event)">Chapter 4</a>, <span class="emphasis"><em>AJAX Calls with JSON Data</em></span>, when we work with AJAX.</p></div><p>This script starts by initializing a <a id="id68" class="indexterm"></a>variable, and assigning an associative array that contains student information. The variable <code class="literal">$students</code> is then passed to a function called <a id="id69" class="indexterm"></a>
        <code class="literal">json_encode()</code>, which converts the variable into a JSON string. When this script is run, it <a id="id70" class="indexterm"></a>generates a valid response that can be exposed as a JSON data feed for other applications to utilize.</p><p>The output is as follows:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_24.jpg" class="img-responsive"></div><p>We have successfully generated our first JSON feed via a simple PHP script; let us take a look at the method to parse JSON that comes in via an HTTP request. It is common for web applications that make asynchronous HTTP requests to send data in JSON format.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note13"></a>Note</h3><p>This example is only intended to show you how JSON can be ingested into PHP.</p></div><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_25.jpg" class="img-responsive"></div><p>The output is <a id="id71" class="indexterm"></a>as <a id="id72" class="indexterm"></a>follows:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_26.jpg" class="img-responsive"></div></div><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h3 class="title"><a id="ch02lvl2sec07"></a>Python</h3></div></div></div><p>Python is a very popular scripting <a id="id73" class="indexterm"></a>language that is extensively used to perform string operations and to <a id="id74" class="indexterm"></a>build console applications. It can be used to fetch data from a JSON API, and once the JSON data is retrieved it will be treated as a JSON string. To perform any operations on that JSON string, Python provides the JSON module. The JSON module is an amalgamation of many powerful functions that we can use to parse the JSON string on hand.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note14"></a>Note</h3><p>This example is only intended to show <a id="id75" class="indexterm"></a>you how JSON can be generated using Python.</p></div><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_27.jpg" class="img-responsive"></div><p>In this example we have used complex datatypes, such as Tuples and Dictionaries, to store the scores and courses respectively; <a id="id76" class="indexterm"></a>since this is not a Python course, we will not go deep into those datatypes.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note15"></a>Note</h3><p>To run this script Python2 needs to be installed, it comes preinstalled on any *nix operating system.</p></div><p>The output is as follows:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_28.jpg" class="img-responsive"></div><p>The keys might get rearranged based on the datatype; we can use the <code class="literal">sort_keys</code> flag to retrieve the original order.</p><p>Now, let us take a quick look at how the JSON decoding is performed in Python.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note16"></a>Note</h3><p>This example is only intended to show you how JSON can be ingested into Python.</p></div><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_29.jpg" class="img-responsive"></div><p>In this example, we are storing the <a id="id77" class="indexterm"></a>JSON string in <code class="literal">student_json</code>, and we are using <a id="id78" class="indexterm"></a>the <code class="literal">json.loads()</code> method that is available through the JSON <a id="id79" class="indexterm"></a>module in Python.</p><p>The output is as follows:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_02_30.jpg" class="img-responsive"></div></div></div>
        </section>
        <section id="ch02lvl1sec16"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Summary</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch02lvl1sec16"></a>Summary</h2></div></div><hr></div><p>This chapter introduced us to the basics of JSON. We went through the history of JSON, and understood its advantages over XML. We created our first JSON object and successfully parsed it. Also, we went over all the datatypes that JSON supports. Finally, we went over some examples as to how JSON can be implemented in other programming languages. As we move forward in this journey, we will find the knowledge that we have gathered in this chapter to be a solid foundation for the more complex concepts that we will go over in the later chapters.</p></div>
        </section>
        <section id="ch03"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Chapter&nbsp;3.&nbsp;Working with Real-time JSON</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="ch03"></a>Chapter&nbsp;3.&nbsp;Working with Real-time JSON</h2></div></div></div><p>In the previous chapter, I introduced you to basic JSON, how JSON objects can be embedded into an HTML file, and how basic operations such as accessing keys can be performed on simple JSON objects. Now let us take a step forward and work with JSON objects that are bigger, more complex, and closer to the JSON that we would work with in real-time situations. In real-world applications, JSON can be retrieved either as a response from an asynchronous request or from a JSON feed. A website uses HTML, CSS, and JavaScript to provide a visually beautiful user interface. But there are cases where data vendors are only focused on getting the data. A <a id="id80" class="indexterm"></a>
        <span class="strong"><strong>data feed</strong></span> serves their purpose; a feed is a crude way of supplying data so that others can reuse it to display the data on their websites or to ingest the data and run their algorithms on it. Such data feeds are big in size and cannot directly be embedded into the <code class="literal">script</code> tag. Let us look at how external JavaScript files can be included in an HTML file.</p><p>The following screenshot depicts the code <a id="id81" class="indexterm"></a>for the <code class="literal">external-js.html</code> file:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_03_01.jpg" class="img-responsive"></div><p>In this example, we include <code class="literal">example.js</code>, which is an external JavaScript file.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_03_02.jpg" class="img-responsive"></div><p>To access the variable <code class="literal">x</code> that is in <a id="id82" class="indexterm"></a>the <code class="literal">example.js</code> file from the <code class="literal">external-js.html</code> file, we write our programs within our <code class="literal">script</code> tags in the HTML file.</p><p>This file has to be created in the same folder as <code class="literal">external-js.html</code>. Follow the given folder structure:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_03_03.jpg" class="img-responsive"></div></div>
        </section>
        <section id="ch03lvl1sec17"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Accessing objects in JSON</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec17"></a>Accessing objects in JSON</h2></div></div><hr></div><p>Now that we understand <a id="id83" class="indexterm"></a>how to make a script call to fetch an external JavaScript file, <a id="id84" class="indexterm"></a>let us use the same technique to import a JSON feed. I have generated a test <code class="literal">employee</code> JSON data feed with 100 records. To traverse through any JSON feed, it is important to make a note of how the data is arranged. The keys in this data feed are basic employee information such as employee number, date of birth, first name, last name, gender, hire date, titles that they have held, and the dates during which they have held those titles. A few employees have held the same title throughout their <a id="id85" class="indexterm"></a>tenure, while <a id="id86" class="indexterm"></a>there are some employees who have held more than one title.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note17"></a>Note</h3><p>This JSON file will be part of the code files for exercises.</p></div><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_03_04.jpg" class="img-responsive"></div><p>As we are dealing with a complex JSON <a id="id87" class="indexterm"></a>data feed, let us save the data feed to a file. In the <code class="literal">data_json_feed.html</code> file, we have imported the <code class="literal">data.json</code> file, which is in the same folder as the HTML file. It is noteworthy that the JSON feed has been assigned to a variable called <a id="id88" class="indexterm"></a>
        <code class="literal">data_json</code>, and to access the JSON feed, we will have to use this variable in the <code class="literal">data_json_feed.html</code> file:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_03_05.jpg" class="img-responsive"></div><p>Another thing to note is the use of a new method called <code class="literal">console.log</code>. Browsers such as Mozilla Firefox, Google Chrome, and Apple Safari profile a console panel for run-time JavaScript development and debugging. <a id="id89" class="indexterm"></a>The use of the JavaScript function <code class="literal">alert</code> is discouraged due to its obtrusive behavior. <code class="literal">console.log</code>, on the other hand, is unobtrusive and logs its messages to the <a id="id90" class="indexterm"></a>console. From here on, we will refrain from using the <code class="literal">alert</code> method and will use <code class="literal">console.log</code> to print data into the console window. Google Chrome and Apple Safari come with developer tools already installed; to view the console, right-click on the page and click on <span class="strong"><strong>Inspect Element</strong></span>. Both of them come with a <span class="strong"><strong>Console</strong></span> tab that allows us to work with our logging. Firefox is dependent on Firebug; in <a class="link ng-scope" href="#" linkend="ch08" ng-click="changePageInner($event)">Chapter 8</a>, <span class="emphasis"><em>Debugging JSON</em></span>, I will walk you through the installation steps of Firebug.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_03_06.jpg" class="img-responsive"></div><p>When we load the <a id="id91" class="indexterm"></a>
        <code class="literal">data_json_feed.html</code> file into the Firefox browser, open up our console window, and click on the <span class="strong"><strong>DOM</strong></span> tab, we are going to see a list of 100 <code class="literal">employee</code> objects. If our object is small and has one or <a id="id92" class="indexterm"></a>two child objects, we would prefer using their numeric indexes to access them; in this case, as we have a huge number of child objects, it <a id="id93" class="indexterm"></a>is not realistic to target objects based on static indexes.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_03_07.jpg" class="img-responsive"></div></div>
        </section>
        <section id="ch03lvl1sec18"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Performing complex operations</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec18"></a>Performing complex operations</h2></div></div><hr></div><p>To tackle an array of objects, we have to handle them in an iterative method. We will have to come up with an iterative solution in which we target one object at a time; once the object is <a id="id94" class="indexterm"></a>accessed, we would not target that object another time. This allows us to maintain data integrity as we can avoid accessing the same object multiple times, thereby avoiding any redundancies. The <a id="id95" class="indexterm"></a>looping statements in JavaScript are the <code class="literal">while</code> <a id="id96" class="indexterm"></a>loop and the <code class="literal">for</code> loop. Let <a id="id97" class="indexterm"></a>us take a quick look at how we can use these looping techniques to traverse through our employees' array.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_03_08.jpg" class="img-responsive"></div><p>In the <code class="literal">while_employees_traversal.html</code> file, we are importing the <code class="literal">data.js</code> file, which we had <a id="id98" class="indexterm"></a>examined in the previous section. The <code class="literal">data_json</code> <a id="id99" class="indexterm"></a>variable inside the <code class="literal">data.js</code> file consists of an array of objects that are imported into this HTML page. In the <code class="literal">script</code> tags, we are setting up two variables: the <code class="literal">i</code> variable to hold a starting counter and the <code class="literal">employeeCount</code> <a id="id100" class="indexterm"></a>variable to hold the counter of the total number of objects in <code class="literal">data_json</code>. To retrieve the number of items that exists in an array, we can use the <code class="literal">.length</code> <a id="id101" class="indexterm"></a>property that is provided by JavaScript. There are three important supporting blocks for a <code class="literal">while</code> loop: the condition, statements in the <code class="literal">while</code> loop, and either the increment or decrement operation based on the condition. Let us take a quick look at these three separately:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_03_09.jpg" class="img-responsive"></div><p>We are initializing the variable <code class="literal">i</code> to zero and the condition that we are looking for is if zero is less than the number of items in the variable <a id="id102" class="indexterm"></a>
        <code class="literal">data_json</code>, then proceed into the loop.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_03_10.jpg" class="img-responsive"></div><p>If the condition is true, the statements inside the loop are executed, until they hit the incrementing condition:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_03_11.jpg" class="img-responsive"></div><p>Once the incrementing operator approaches, the value of the <code class="literal">i</code> variable is incremented by 1, and it will go back to the initial step of the <code class="literal">while</code> loop. At the initial step, the condition is again verified to check if <code class="literal">i</code> is still less than the number of items <a id="id103" class="indexterm"></a>in <code class="literal">data_json</code>. If that were true, it would again enter the loop and execute the statements. This process continues to repeat itself until the value of variable <code class="literal">i</code> is equal to that of <code class="literal">employeeCount</code>. At that point, the <code class="literal">while</code> loop's execution is complete, and the statements inside the <code class="literal">while</code> loop are maintained as logs in the console window of the browser. Before running the HTML file, <code class="literal">while_employees_traversal.html</code>, verify that the <code class="literal">data.json</code> file is in <a id="id104" class="indexterm"></a>the same directory as the HTML file. Load this HTML file into a browser of your choice (Chrome, Firefox, or Safari are recommended), open up the console window by right-clicking on the web page and clicking on <span class="strong"><strong>Inspect Element</strong></span> if you are on Chrome or Safari. The employee numbers should be displayed on the console window:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_03_12.jpg" class="img-responsive"></div><p>To retrieve the employee's first name and <a id="id105" class="indexterm"></a>last name, we will concatenate the <code class="literal">first_name</code> and <code class="literal">last_name</code> keys in the <code class="literal">employee</code> object:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_03_13.jpg" class="img-responsive"></div><p>We can use the same technique to <a id="id106" class="indexterm"></a>retrieve the rest of the keys such as <code class="literal">birth_date</code>, <code class="literal">gender</code>, and <code class="literal">hire_date</code>, except for <code class="literal">titles</code>. A quick glance at the JSON feed explains that unlike the rest of the keys, <code class="literal">titles</code> is an object or an array of objects. The <code class="literal">titles</code> object contains all the titles that the employee has held since joining the company. Some employees have one title, while others have more than one; so the former would be an object by itself, while the latter would be an array of objects, each containing a <code class="literal">title</code> object. To handle this case, we would have to check if the employee has one title or more than one title. If the person has one title, we should print the data, and if the person has more than one title, we would have to iterate them through the array of <code class="literal">title</code> objects to print all the titles that the <a id="id107" class="indexterm"></a>employee has.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_03_14.jpg" class="img-responsive"></div><p>The existent code in the <code class="literal">script</code> tags has to be replaced with the previous code, provided to retrieve the titles of the employee. In this script, we are using the variables <code class="literal">i</code> and <code class="literal">employeeCount</code> from our earlier script. We have introduced a new condition to check if the <code class="literal">titles</code> key for a particular employee is an <a id="id108" class="indexterm"></a>
        <code class="literal">Array</code> object. This condition gets the type of the value that the loop is passing in and verifies if it is an instance of an <code class="literal">Array</code> object. Let us identify this condition that is checking the instance type:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_03_15.jpg" class="img-responsive"></div><p>Once this condition is satisfied, the statements inside the condition are executed. Inside the success condition we declare three variables. The first variable, <code class="literal">j</code>, would hold the counter for the second <code class="literal">while</code> <a id="id109" class="indexterm"></a>loop that would iterate through <code class="literal">titles</code>. The second variable is <code class="literal">titleCount</code>; <a id="id110" class="indexterm"></a>it would store the number of items that are available in the <code class="literal">titles</code> array. The last variable is <code class="literal">titles</code>, which is initialized to an empty string. This variable would hold all the titles held by the employee. It stores the list of titles as a list separated by <code class="literal">&amp;</code>:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_03_16.jpg" class="img-responsive"></div><p>In this <code class="literal">while</code> loop, the titles of the employee are being built; one title at a time is being added to the <code class="literal">titles</code> variable. Once the title has been added to the <a id="id111" class="indexterm"></a>
        <code class="literal">titles</code> variable, the value of <code class="literal">j</code> is incremented and the loop continues until all the <code class="literal">title</code> objects are iterated. If the <code class="literal">titles</code> key is not an array, the execution would go into the <code class="literal">else</code> block and the statements in the <code class="literal">else</code> block are executed. As there is only one title for that employee, the data would be directly printed onto the console. Now let us look at the same example and use the <code class="literal">for</code> loop. Similar to the <code class="literal">while</code> loop, the <code class="literal">for</code> loop also traverses through the array of employees from the <code class="literal">data_json</code> <a id="id112" class="indexterm"></a>variable. The business logic remains the same irrespective of what looping technique is used. Let us re-create the same example using the <code class="literal">for</code> loop:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_03_17.jpg" class="img-responsive"></div><p>Unlike the <code class="literal">while</code> loop, we would not need extra counter variables to hold the current index and the length of the array, the <code class="literal">for</code> <a id="id113" class="indexterm"></a>loop takes care of those counters. Other than the foundational changes with the syntax, the business logic remains the same, as I had pointed out earlier. Now that we are familiar with how we can access objects and perform complex operations to extract data, in the next section, let us take a look at how JSON data can be modified.</p></div>
        </section>
        <section id="ch03lvl1sec19"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Modifying JSON</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec19"></a>Modifying JSON</h2></div></div><hr></div><p>JSON retrieved from a JSON feed is <a id="id114" class="indexterm"></a>always going to be read-only; as such data feeds do not provide functionality to modify their data from unverified sources. There are many cases where we would want to ingest the data from an external data feed, and then modify that content as per our requirements. An example is a company that is using a data feed that is being supplied by a data vendor, but the data that is being provided is a lot more than the company requires. In such cases, rather than using the whole feed, the company would only extract a part of it, perform certain operations to modify it as per their requirements, and reuse the new JSON object. Let us take our <code class="literal">employee</code> JSON feed. Assume that the name of the company was different during different periods. We want to group the employees by company name, which is based on when they joined. Employees who joined the company before 1987 belong to Company 1 and those who joined the company in 1987 or after belong to Company 2. To represent this change, we add the <code class="literal">company</code> key to our JSON feed:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_03_18.jpg" class="img-responsive"></div><p>In the <code class="literal">for_employee_company.html</code> file, <a id="id115" class="indexterm"></a>we are traversing through the array of <code class="literal">employee</code> objects and we are extracting the year in which the employee joined. We are converting this from a string to an <a id="id116" class="indexterm"></a>integer, so we can use the year value for comparison purposes. We assign the parsed year to the <a id="id117" class="indexterm"></a>
        <code class="literal">join_year</code> variable:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_03_19.jpg" class="img-responsive"></div><p>In the following screenshot, we are checking to see if the employee joined the company before 1987; if they have joined before 1987, we add the <code class="literal">company</code> property to the <code class="literal">employee</code> object and assign the value of <code class="literal">Company1</code>. If they have joined in 1987 or after 1987, we assign the value of <code class="literal">Company2</code>:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_03_20.jpg" class="img-responsive"></div><p>After a value is assigned to the newly added property company, we build a generic message that would apply for all the <a id="id118" class="indexterm"></a>employees, irrespective of which company they belong to. We extract the employee number, the year in which the employee joined, and the name of the company to generate that message:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_03_21.jpg" class="img-responsive"></div><p>When <code class="literal">for_employee_company.html</code> is run from the web browser, the script to perform the modifications is run and the output is logged to the console:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_03_22.jpg" class="img-responsive"></div></div>
        </section>
        <section id="ch03lvl1sec20"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Summary</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch03lvl1sec20"></a>Summary</h2></div></div><hr></div><p>This chapter addresses the core concepts of how to handle static JSON feeds. We began by importing an external JSON object into our HTML file, looped through the complex array of objects to parse and extract required data. We used the <code class="literal">while</code> and <code class="literal">for</code> loops to loop through the array and used conditions to target our search. We completed this chapter by locally modifying the existing JSON feed and adding a new property, the <code class="literal">employee</code> object. Now that we have mastered accessing JSON from a static file, it is time for us to make some asynchronous calls to fetch some active JSON over HTTP.</p></div>
        </section>
        <section id="ch04"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Chapter&nbsp;4.&nbsp;AJAX Calls with JSON Data</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="ch04"></a>Chapter&nbsp;4.&nbsp;AJAX Calls with JSON Data</h2></div></div></div><p>JSON is considered today to <a id="id119" class="indexterm"></a>be the most popular data interchange format. In the previous chapter we saw an example using a JSON feed as a data store. In this chapter let's make the data a little more dynamic. HTML, client-side JavaScript, and CSS provide the structural, behavioral, and presentational aspects respectively. Dynamic <a id="id120" class="indexterm"></a>web development is all about data transfer between two parties, the client and the server. We use programs such as a web server, a database, and a server-side programming language to fetch and store dynamic data. Let's take a look at the process behind the scenes that facilitates successful operations on the data.</p><p>When a user opens up a web browser and types <code class="literal">http://www.packtpub.com/</code>, the browser makes a request to the <a id="id121" class="indexterm"></a>
        <span class="strong"><strong>Internet Service Provider</strong></span> (<span class="strong"><strong>ISP</strong></span>) to perform a reverse lookup of the IP address by providing the domain name. Once the IP address is retrieved, the request is then forwarded to the machine that owns the IP address. At that point, there is a web server that is waiting to consume the request; the web server could be one of the top web servers, such as Apache, IIS, Tomcat, and Nginx. The <a id="id122" class="indexterm"></a>web server receives the request and looks at the headers that are part of the HTTP request; those headers pass the information about the request that was made to the web server. Once the web server parses those headers, it routes the request over to a server-side programming application that is responsible for handling this request. The application could be written in PHP, C#/ASP.NET, Java/JSP, and so on. This responsible server-side language takes the request, understands it, and performs the necessary business logic to complete the request. A few examples of such HTTP requests are loading a web page and clicking the <span class="strong"><strong>Contact us</strong></span> link on a website. There can be complex HTTP requests <a id="id123" class="indexterm"></a>too, where the data has to be validated, cleansed, and/or retrieved from a data storage application such as a database, a file server, or a caching server.</p><p>These HTTP requests can be made in two ways—synchronously and asynchronously. A synchronous <a id="id124" class="indexterm"></a>request is a blocking request, where everything has to be <a id="id125" class="indexterm"></a>done in an orderly fashion, one step after another, and where the following step has to wait until the previous one has completed execution. Let's assume that there are four independent components on a web page when the page is loaded; if one component takes a long time during execution, the rest of the page is going to wait for it until its execution is complete. If execution fails, the page load fails too. One other example is when there is a poll and a ratings component on the web page; if the user chooses to answer the poll and give a rating to fulfill these requests, two <a id="id126" class="indexterm"></a>requests have to be sent out one after the other if we go with a synchronous requesting mechanism.</p><p>To tackle the issue of synchronous requests, the development community has gradually made progress in the field of asynchronous HTTP requests. The first product to come out that allowed asynchronous requests were the IFrame tags, introduced by Microsoft; they used IFrames via Internet Explorer to load content asynchronously. After IFrame, next in line to revolutionize the Internet was the XML HTTP ActiveX control. In later years, all the browsers adopted this control under the new name XMLHTTPRequest <a id="id127" class="indexterm"></a>JavaScript object, which is part of the XMLHTTPRequest API. The <a id="id128" class="indexterm"></a>XMLHTTPRequest API is used to make an HTTP (or HTTPS) call to a web server. It can be <a id="id129" class="indexterm"></a>used to make both synchronous and asynchronous calls. Asynchronous requests allow <a id="id130" class="indexterm"></a>developers to divide web pages into multiple components independent of each other, thereby saving a lot of memory by sending data on demand.</p><p><span class="emphasis"><em>Jesse James Garrett</em></span> named this <a id="id131" class="indexterm"></a>phenomenon "AJAX". In <span class="strong"><strong>AJAX</strong></span> (<span class="strong"><strong>Asynchronous JavaScript and XML</strong></span>), web requests are made via JavaScript and the data interchange originally happened in XML. The "X" in AJAX was originally considered to be XML, but today it can be any data interchange format, such as XML, JSON, text file, or even HTML. The data format being used for the data transfer has to be mentioned in the MIME type headers. In <a class="link ng-scope" href="#" linkend="ch02" ng-click="changePageInner($event)">Chapter 2</a>, <span class="emphasis"><em>Getting Started with JSON</em></span>, we have already highlighted why JSON is the preferred data interchange format. Let us take a quick look at what we would need to make our first AJAX call with JSON data.</p><p>Essentially, web developers can use the principles of AJAX to fetch data on demand to make websites more responsive and interactive; it is very important to understand what generates that demand. The trigger for such a demand for data is commonly an event that occurs on the web page. An <a id="id132" class="indexterm"></a>
        <span class="strong"><strong>event</strong></span> can be described as a reaction to an action that was performed, for example, ringing a bell produces a vibration inside the bell that generates the sound. Here, ringing a bell is the event, while the sound that is produced is the reaction to the event. There can be multiple events on a web page; a few such events are clicking a button, submitting a form, hovering over a link, and choosing an option from a drop-down, all of which are very common events. We have to come up with a way in which they are programmatically handled when these events occur.</p></div>
        </section>
        <section id="ch04lvl1sec21"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Requirements for AJAX</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec21"></a>Requirements for AJAX</h2></div></div><hr></div><p>AJAX is an asynchronous <a id="id133" class="indexterm"></a>two-way communication between the browser that is considered to be the client, and a live web server via HTTP (or HTTPS). We can run a live server locally, such as Apache or IIS on Windows or Apache on Linux and Mac OS. I will take us through setting up the Apache web server in a Linux environment and simultaneously also explain how to use the Microsoft Visual Studio development environment to build web applications. For this AJAX course, let us pick PHP and MySQL to be our main server-side language and database.</p><p>In this chapter, I will take you through two setups; the first will be setting up Apache and PHP to develop server-side programs on a Linux machine, while the second one will be running a .NET-powered web application on Windows. Microsoft's .NET Framework requires the libraries in the .NET Framework and Visual Studio IDE to be installed. I will assume that you have performed both the steps; we will now set up a web application in ASP.NET, powered by C#.</p><p>Linux is an open <a id="id134" class="indexterm"></a>source operating system and has been the chosen OS by the development fraternity for non-Microsoft programming and scripting languages, such as PHP, Python, Java, and Ruby. The development environment when using PHP, Perl, or Python on a Linux operating system is often referred to as a LAMP environment. <a id="id135" class="indexterm"></a>
        <span class="strong"><strong>LAMP</strong></span> stands for <span class="strong"><strong>Linux</strong></span>, <span class="strong"><strong>Apache</strong></span>, <span class="strong"><strong>MySQL</strong></span>, and <span class="strong"><strong>PHP</strong></span> (or <span class="strong"><strong>Python</strong></span> or <span class="strong"><strong>Perl</strong></span>). The <code class="literal">tasksel</code> package <a id="id136" class="indexterm"></a>allows us to install Apache, MySQL, and PHP in a single shot. Let's take a quick look at the necessary steps for installing the LAMP stack. On your Linux operating system, open up the terminal and type <code class="literal">sudo apt-get install tasksel</code>. The operating system, based on your user privileges, might prompt you for a password; after entering the password, hit <span class="emphasis"><em>Enter</em></span>.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_04_01.jpg" class="img-responsive"></div><p>As we are installing a package on the operating system, the OS will display the package and dependency information for the package it is installing and will prompt the user to check whether this is the targeted package. Hit the <span class="emphasis"><em>Y</em></span> key on your keyboard to say "yes"; the operating system will then go to the repositories and fetch the package to be installed. Upon installation, we can use <a id="id137" class="indexterm"></a>
        <code class="literal">tasksel</code> to install the LAMP server. To do this, we will have to invoke the <code class="literal">tasksel</code> program from the terminal by using the command <code class="literal">sudo tasksel</code>, <a id="id138" class="indexterm"></a>as shown in the screenshot that follows:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_04_02.jpg" class="img-responsive"></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note18"></a>Note</h3><p><code class="literal">sudo</code> is required to <a id="id139" class="indexterm"></a>perform installation operations as normal users might not have the required privileges.</p></div><p>Upon invoking <code class="literal">tasksel</code> we will get a list of installable packages, such as the LAMP server, Tomcat server, and DNS server; we will be choosing the LAMP server. To navigate within the <code class="literal">tasksel</code> shell, we will use our arrows keys to move up and down, and the Space bar to select the program that has to be installed.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_04_03.jpg" class="img-responsive"></div><p>After selecting <span class="strong"><strong>LAMP server</strong></span>, <a id="id140" class="indexterm"></a>go ahead and press <span class="emphasis"><em>Enter</em></span> to confirm the installation. Once the installation is complete, we are all set to write our first server-side program to generate and host a live JSON feed. To do this, we will navigate to the document root folder, which will be the only folder available to Apache. The document root folder is a folder where the files pertaining to a website or a web application are placed. Only web servers such as Apache, Tomcat, IIS, and Nginx are given access to these folders as unverified and anonymous users could get access to these files via the website. The default document root folder for Apache in Linux is the <code class="literal">/var/www</code> folder. To navigate to <code class="literal">/var/www</code>, we will use the <a id="id141" class="indexterm"></a>
        <code class="literal">cd</code> command, which refers to change directory.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_04_04.jpg" class="img-responsive"></div><p>Once we are in the <code class="literal">www</code> folder, we can start creating our server-side scripts. Apache already provides us with a test HTML <a id="id142" class="indexterm"></a>page (in that folder) to test if Apache is up and running; it is named as the <code class="literal">index.html</code>. To perform this activity, we should open up a browser in the Linux operating system and access <code class="literal">http://localhost/index.html</code>; we should then get a success message.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_04_05.jpg" class="img-responsive"></div><p>Once we receive this message we are assured that our <a id="id143" class="indexterm"></a>Apache web server is up and running. Now let's set up a similar architecture using a Windows operating system and C# or ASP.NET.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_04_20.jpg" class="img-responsive"></div><p>Microsoft Visual Studio is the chosen environment to develop server-side programs or web applications using ASP.NET and C#. Navigate to <span class="strong"><strong>File</strong></span> | <span class="strong"><strong>New</strong></span> | <span class="strong"><strong>Web Site</strong></span>. Visual Studio comes along with its own <a id="id144" class="indexterm"></a>development server for running a website during development.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_04_21.jpg" class="img-responsive"></div><p>Once we click on the <span class="strong"><strong>New Web Site</strong></span> option, we will have to choose what type of a website we are building; since <a id="id145" class="indexterm"></a>this is just a dummy website, let us keep it simple by choosing <span class="strong"><strong>ASP.NET Web Site</strong></span> and then clicking on <span class="strong"><strong>OK</strong></span>. This is shown in the preceding screenshot.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_04_22.jpg" class="img-responsive"></div><p>The default ASP.NET <a id="id146" class="indexterm"></a>website comes with some basic HTML that can be used for testing; go ahead and click on the green button beside <span class="strong"><strong>Debug</strong></span>. This is used to run the website; keep in mind that C# or ASP.NET programs have to be compiled before they can be run, unlike PHP or Python, which are interpreted languages.</p><p> </p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_04_23.jpg" class="img-responsive"></div><p>And here is our Hello World <a id="id147" class="indexterm"></a>website application that is powered by C#/ASP.NET. Web applications can be built in any language, and JSON can be used as the data interchange language between web applications powered by any server-side stack. Let's take this knowledge of server-side programming and move forward on our journey so that we can implement this in powerful web applications.</p></div>
        </section>
        <section id="ch04lvl1sec22"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Hosting JSON</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec22"></a>Hosting JSON</h2></div></div><hr></div><p>In this section, we will be <a id="id148" class="indexterm"></a>creating a PHP script that will allow us to send a JSON feedback to the user upon a successful request. Let's take a look at the <code class="literal">index.php</code> file, which accomplishes this task:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_04_06.jpg" class="img-responsive"></div><p>In this PHP script, we have created a basic <code class="literal">students</code> array and are generating the JSON feed for that array. The <code class="literal">students</code> array contains basic student information, such as the first name, last name, student ID, and the classes that the student has enrolled.</p><p>This file has to be placed in the <code class="literal">www</code> <a id="id149" class="indexterm"></a>folder, and it should be on the same level as the default <code class="literal">index.html</code> file that comes with the LAMP installation. Refer to the folder structure in the following screenshot:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_04_08.jpg" class="img-responsive"></div><p>Now that our <code class="literal">index.php</code> is in the document root folder, we can load this file using our web server. To access this file via our Apache web server, navigate to <code class="literal">http://localhost/index.php</code>.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_04_07.jpg" class="img-responsive"></div><p>As shown in the preceding screenshot, when the file is run using the Apache web server, the server takes the request, parses the <a id="id150" class="indexterm"></a>PHP code, and outputs the JSON feed that delivers the student data.</p></div>
        </section>
        <section id="ch04lvl1sec23"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Making your first AJAX call</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec23"></a>Making your first AJAX call</h2></div></div><hr></div><p>Now that we have an active JSON data <a id="id151" class="indexterm"></a>feed, it is about time to make our first AJAX call. We will look at two approaches of making an AJAX call; these approaches come from different periods in time. The first approach will use basic JavaScript so that we understand what happens behind the scenes when an AJAX call is made. Once we understand the concept of AJAX, we will use a popular JavaScript library to make the same AJAX call but with simpler code. Let's take a look at our first approach using basic JavaScript:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_04_09.jpg" class="img-responsive"></div><p>We will begin with our basic <code class="literal">index.html</code> file that loads an external JavaScript file. This JavaScript file performs the AJAX call to fetch the <code class="literal">students</code> JSON feed.</p><p>Let us take a <a id="id152" class="indexterm"></a>look at <code class="literal">index.js</code>:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_04_10.jpg" class="img-responsive"></div><p>This is the original way in which an AJAX call is made to a live web server; let's break this script into pieces and investigate it piece by piece:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_04_11.jpg" class="img-responsive"></div><p>In the preceding snippet we are creating an instance of the <code class="literal">XMLHttpRequest</code> object. The <code class="literal">XMLHttpRequest</code> <a id="id153" class="indexterm"></a>object lets us make asynchronous calls to the server, thus allowing us to treat sections in the page as separate components. It comes with powerful properties such as <code class="literal">readystate</code>, <code class="literal">response</code>, <code class="literal">responseText</code>, and methods such as <code class="literal">open</code>, <code class="literal">onuploadprogress</code>, <code class="literal">onreadystatechange</code>, and <code class="literal">send</code>. Let's look at how we can use the <a id="id154" class="indexterm"></a>
        <code class="literal">request</code> object that we have created to open an AJAX request:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_04_12.jpg" class="img-responsive"></div><p><code class="literal">XMLHttpRequest</code>, by default, opens up an asynchronous request; here we will specify the method in which the live feed has to be contacted. As we will not be passing any data, we choose the HTTP <code class="literal">GET</code> method to send the data over to our live web server. While working on an asynchronous request, we should never have a blocking script; we can deal with this by setting up callbacks. A <a id="id155" class="indexterm"></a>
        <span class="strong"><strong>callback</strong></span> is a set of scripts that will be waiting for a response and will be fired on receiving that response. This behavior facilitates non-blocking code.</p><p>We are setting up a callback and are assigning the callback to a method called <code class="literal">onreadystatechange</code>, <a id="id156" class="indexterm"></a>as shown in the following screenshot:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_04_13.jpg" class="img-responsive"></div><p>The placeholder method, <a id="id157" class="indexterm"></a>
        <code class="literal">onreadystatechange</code>, looks for a property in the request object called <code class="literal">readyState</code>; whenever the value of <code class="literal">readyState</code> changes, the <code class="literal">onreadystatechange</code> event is fired. The <a id="id158" class="indexterm"></a>
        <code class="literal">readyState</code> property keeps track of the progress of the <code class="literal">XMLHttpRequest</code> that is made. In the preceding screenshot, we can see the callback has a conditional statement that is verifying that the value of <code class="literal">readyState</code> is <code class="literal">4</code>, meaning that the server has received the <code class="literal">XMLHttpRequest</code> <a id="id159" class="indexterm"></a>that was made by the client and a response is ready. Let's take a quick look at the available values for <code class="literal">readyState</code>:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col align="left"><col align="left"></colgroup><thead><tr><th style="border-bottom: 0.5pt solid ; " align="left" valign="bottom">
        <p><code class="literal">readyState</code></p>
        </th><th style="border-bottom: 0.5pt solid ; " align="left" valign="bottom">
        <p>Description</p>
        </th></tr></thead><tbody><tr><td style="" align="left" valign="top">
        <p><code class="literal">0</code></p>
        </td><td style="" align="left" valign="top">
        <p>The request hasn't been initialized</p>
        </td></tr><tr><td style="" align="left" valign="top">
        <p><code class="literal">1</code></p>
        </td><td style="" align="left" valign="top">
        <p>Server connection established</p>
        </td></tr><tr><td style="" align="left" valign="top">
        <p><code class="literal">2</code></p>
        </td><td style="" align="left" valign="top">
        <p>The server has received the request</p>
        </td></tr><tr><td style="" align="left" valign="top">
        <p><code class="literal">3</code></p>
        </td><td style="" align="left" valign="top">
        <p>The server is processing the request</p>
        </td></tr><tr><td style="" align="left" valign="top">
        <p><code class="literal">4</code></p>
        </td><td style="" align="left" valign="top">
        <p>The request has been processed and the response is ready</p>
        </td></tr></tbody></table></div><p>In the earlier screenshot, we are also looking for another property called the <code class="literal">status</code>; this is the HTTP status code that is coming back from the server. Status code <code class="literal">200</code> represents a successful transaction, while status code <code class="literal">400</code> is a bad request and <code class="literal">404</code> means Page Not Found. Other common status codes are <code class="literal">401</code>, which means the user has requested a page that is available only for authorized users, and <code class="literal">500</code>, which is an Internal Server Error.</p><p>We have created the <a id="id160" class="indexterm"></a>
        <code class="literal">XMLHttpRequest</code> object and opened the connection; we have also added a callback to perform an event when the request is successful. One thing to keep in mind is that the request hasn't yet been made; we are only laying the foundation work for the request. We will <a id="id161" class="indexterm"></a>use the <code class="literal">send()</code> method to send the request over to the server, as shown:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_04_14.jpg" class="img-responsive"></div><p>In our <code class="literal">onreadystateChange</code> <a id="id162" class="indexterm"></a>callback, we are logging the response that is sent by the web server to the console window. Let's take a quick look at what the response looks like:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_04_15.jpg" class="img-responsive"></div><p>One way to confirm that this is an AJAX request is by looking at the first request in the console, where an asynchronous call is made to the <code class="literal">index.php</code> file and the response comes back with an HTTP status code of <code class="literal">200 OK</code>. Since the HTTP <code class="literal">status</code> value is <code class="literal">200</code>, the execution of the callback will be successful and it will output the <code class="literal">students</code> JSON feed onto the console window.</p><p>With the advent of powerful JavaScript libraries such as jQuery, Scriptaculous, Dojo, and ExtJS, we have moved away from the archaic process of making an AJAX request. One thing to keep in mind is, that, though we do not use this process, the libraries will still be using this process under the hood; <a id="id163" class="indexterm"></a>so having an idea of how the <code class="literal">XMLHttpRequest</code> object works is very important. jQuery is a very popular JavaScript library; it has a growing community with a lot of developers. As the jQuery library is distributed under the MIT License, it allows users to utilize this library free of cost.</p><p>jQuery is a very <a id="id164" class="indexterm"></a>simple, powerful library with fantastic documentation and a strong user community that makes a developer's life very easy. Let's take a quick detour and write our customary Hello World program in jQuery:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_04_16.jpg" class="img-responsive"></div><p>In the preceding screenshot, we are importing the jQuery library into our HTML file, and in the second set of script tags, we are using the special character <code class="literal">$</code> or jQuery. Similar to the concept of the namespace in object-oriented programming, the <code class="literal">jQuery</code> functionality is namespaced to the special character <code class="literal">$</code> by default. jQuery has been a champion of unobtrusive JavaScript. After <a id="id165" class="indexterm"></a>
        <code class="literal">$</code>, we call the <code class="literal">document</code> object and check whether the it has loaded onto the page; then we assign a callback function that will be triggered on a complete load of the document. "<code class="literal">document</code>" here the <code class="literal">document</code> object that holds the HTML element structure. The output for this program is going be the <code class="literal">Hello World!</code> string that will be outputted to our console window.</p></div>
        </section>
        <section id="ch04lvl1sec24"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Parsing JSON data</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec24"></a>Parsing JSON data</h2></div></div><hr></div><p>Now that we are familiar with <a id="id166" class="indexterm"></a>jQuery, let us trigger an AJAX request on an event such as a button click.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_04_17.jpg" class="img-responsive"></div><p>In this snippet, let us begin by observing the HTML <code class="literal">document</code> object. We have a <code class="literal">div</code> element that has an empty unordered list. The aim of this script is to populate the unordered list with list items on the click of a button. The input button element has an <code class="literal">id</code> with the value <code class="literal">"getFeed"</code>, and the click event handler will be tied to this button. Since AJAX is asynchronous and as we are tying a callback to this button, no AJAX calls are made to our live server when the <code class="literal">document</code> object is loaded. The HTML structure alone is loaded onto the page, and the events are tied to these elements.</p><p>When the button is clicked on, we <a id="id167" class="indexterm"></a>are using the method <code class="literal">getJSON</code> to make an AJAX call to the live web server to retrieve the JSON data. Since we are getting an array of students, we will pass the retrieved data into jQuerys' <code class="literal">each</code> iterator to retrieve one element at a time. Inside the iterator, we are building a string, which is appended as a list item to the <code class="literal">"feedContainerList"</code> unordered list element.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_04_18.jpg" class="img-responsive"></div><p>On loading of the document, as we are only binding our events to the HTML elements, there will not be any behavioral <a id="id168" class="indexterm"></a>changes unless we click on the button. Once we click on the button, the unordered list will be populated.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_04_19.jpg" class="img-responsive"></div></div>
        </section>
        <section id="ch04lvl1sec25"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Summary</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch04lvl1sec25"></a>Summary</h2></div></div><hr></div><p>Since the rise in popularity of the <code class="literal">XMLHttpRequest</code> object, it has become a boon to web developers. In this chapter we began with the basics, such as what we need to make an AJAX request. Once we analyzed the basic stack of software that we need for AJAX, we moved ahead and understood the basic concept of how an <code class="literal">XMLHttpRequest</code> object is responsible for making an asynchronous request. Then we took a leap into one of the most powerful JavaScript Libraries, jQuery, to perform AJAX operations using jQuery. This is just the beginning of our journey into AJAX; in the next chapter we will be looking at more complex cases where AJAX is used, the cases where cross-domain asynchronous requests fail, and how JSON savesthe day by allowing us to make cross-domain asynchronous calls.</p></div>
        </section>
        <section id="ch05"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Chapter&nbsp;5.&nbsp;Cross-domain Asynchronous Requests</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="ch05"></a>Chapter&nbsp;5.&nbsp;Cross-domain Asynchronous Requests</h2></div></div></div><p>In the previous chapter, we used jQuery's <code class="literal">getJSON</code> method to ingest the <code class="literal">students</code> JSON feed; in this chapter we will take a <a id="id169" class="indexterm"></a>step forward and send request parameters over to the server. <a id="id170" class="indexterm"></a>Data feeds are often large amounts of data that are made available; the data that is part of such feeds is normally generic and can be considered too heavy for a targeted search. For example, in the <code class="literal">students</code> JSON feed, <a id="id171" class="indexterm"></a>we are exposing the whole list of student information that is available. For a data vendor who is looking for students who are enrolled in certain courses or who reside in a given ZIP code to hire them as interns, this feed is going to be generic. It is common to see development teams build <span class="strong"><strong>Application Programming Interfaces</strong></span> or <span class="strong"><strong>APIs</strong></span> to give such data vendors numerous ways to target their search. This is a win-win situation for both <a id="id172" class="indexterm"></a>the data vendor and for the company that owns the information since the data vendor only gets the information that they are looking for and the data supplier only sends the requested data, thereby saving a lot of bandwidth and server resources.</p></div>
        </section>

        <section id="ch05lvl1sec26"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Making GET and POST AJAX calls with JSON data</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec26"></a>Making GET and POST AJAX calls with JSON data</h2></div></div><hr></div><p>It is important to <a id="id173" class="indexterm"></a>understand that both synchronous and asynchronous calls are made over HTTP, so the data transfer process is the same. The popular methods to <a id="id174" class="indexterm"></a>transfer data from the client machine to the server machine are <code class="literal">GET</code> and <code class="literal">POST</code>. The most common request method in HTTP <a id="id175" class="indexterm"></a>is <code class="literal">GET</code>. When a client requests a web <a id="id176" class="indexterm"></a>page, the web server uses the URL to process the HTTP request. Any other parameters that are appended to the URL serve as the data that is being sent from the client to the server. Since the parameters are part of the URL, it is important to make a clear distinction between when to and when not to use the <code class="literal">GET</code> request method. The <code class="literal">GET</code> method should be used to pass idempotent information such as a page number, a link address, or the limits and offsets that are a part of pagination. Keep in mind that there is a size constraint as to how much data can be transferred via the <code class="literal">GET</code> request method.</p><p>The <code class="literal">POST</code> request method is <a id="id177" class="indexterm"></a>commonly used while sending the data that is big in size and that is non-trivial. Unlike the <code class="literal">GET</code> method, the data is transferred through the HTTP message <a id="id178" class="indexterm"></a>body; we can use tools such as Fiddler and the developer tools available in the browser to track the data that is going out through the HTTP message body. The data that is being passed through the <code class="literal">POST</code> <a id="id179" class="indexterm"></a>method cannot be bookmarked or cached, unlike the <code class="literal">GET</code> method. The <code class="literal">POST</code> method is often used to send data while using forms. For our examples in this chapter, let us use <a id="id180" class="indexterm"></a>jQuery's <code class="literal">ajax</code> method to send data over to the server in JSON format. We will be working with a modified <code class="literal">students</code> API where we will be able to query complete student information—the ZIP code they live in, the classes that they take, and so on—and use a combination search to find students who live in a certain area and are taking a certain class. A <a id="id181" class="indexterm"></a>new addition to our API is the functionality to add a student via a <code class="literal">POST</code> request; the student information has to be sent as a JSON object.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note19"></a>Note</h3><p>This API is built in PHP and MySQL. The PHP and MySQL files would be made available in the <code class="literal">scripts-chap5</code> folder present in the code bundle..</p></div><p>Before we start building scripts <a id="id182" class="indexterm"></a>to make our asynchronous calls, let's take a look at the URLs that our <code class="literal">students</code> API provides. The first API call will be the generic search that will retrieve information for all the students in the database.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_05_01.jpg" class="img-responsive"></div><p>As we have not started our targeted search, the URL has been kept for a generic search. Now let's look at the URL for our first targeted search—by ZIP code. This API call will return all the students that reside in the given ZIP code area.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_05_02.jpg" class="img-responsive"></div><p>In this example, the URL will return the information for all the students that reside in the ZIP code <code class="literal">08810</code>. Let's switch the search criteria from the ZIP code to the class that a student has enrolled into.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_05_03.jpg" class="img-responsive"></div><p>In this example, the URL will return <a id="id183" class="indexterm"></a>information for all the students that <a id="id184" class="indexterm"></a>have enrolled for the class <code class="literal">Economics</code>. Now that we have the power of targeting the search by a ZIP code and a class, let us <a id="id185" class="indexterm"></a>look at another call in our API to <a id="id186" class="indexterm"></a>retrieve information by using both the ZIP code that the user resides in and the class that he or she has enrolled in.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_05_04.jpg" class="img-responsive"></div><p>In this example, a call to the URL will return information for all the students that have enrolled for the class <code class="literal">Accounting</code> and reside in the ZIP code <code class="literal">77082</code>.</p><p>The calls had until now used the HTTP <a id="id187" class="indexterm"></a>
        <code class="literal">GET</code> method to transfer data from the client to the server. The last call in our API is powered by the HTTP <code class="literal">POST</code> method for <a id="id188" class="indexterm"></a>adding a student. This call needs heavy data input, as a user can have multiple ZIP codes and multiple addresses and can be enrolled in multiple classes.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_05_05.jpg" class="img-responsive"></div><p>As this is an <a id="id189" class="indexterm"></a>HTTP <code class="literal">POST</code> method, none of the data that is being passed in is visible. Let's move forward with our scripts to access these calls; the first script will be to access the API call that provides information for all the students.</p><p>The following is the <a id="id190" class="indexterm"></a>code <a id="id191" class="indexterm"></a>snippet for <code class="literal">get-students.html</code>:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_05_06.jpg" class="img-responsive"></div><p>In this call we start by importing the jQuery library; we can start using the <code class="literal">$</code> variable as we have jQuery on the page. We begin by adding a callback that is fired when the document is ready. We are using the <a id="id192" class="indexterm"></a>
        <code class="literal">ajax</code> method for this example as it allows us to make the <code class="literal">GET</code> and <code class="literal">POST</code> requests, and when required, we can modify the <code class="literal">datatype</code> property in the <code class="literal">ajax</code> call to <code class="literal">JSONP</code> to <a id="id193" class="indexterm"></a>make asynchronous cross-domain calls.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note20"></a>Note</h3><p>It is not necessary to explicitly mention when the type is GET, but it helps us build consistency with our code.</p></div><p>In our <code class="literal">ajax</code> call we begin by setting <a id="id194" class="indexterm"></a>the <code class="literal">url</code> property to the link to our API call to retrieve the student information; we specify that this will be performed via the HTTP <code class="literal">GET</code> method. The fourth property that we are setting is the <code class="literal">dataType</code> property; this is used to mention the type of the data that we are expecting returned. As we are working with the <code class="literal">students</code> feed, we will have to set the <code class="literal">dataType</code> property <a id="id195" class="indexterm"></a>to JSON. It is important to note the <code class="literal">done</code> callback that is fired when the server sends a response back to our asynchronous request. We are passing the data that is sent over from the <a id="id196" class="indexterm"></a>server as a <a id="id197" class="indexterm"></a>response, initiating the callback.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note21"></a>Note</h3><p><code class="literal">done</code> is the same as <code class="literal">readyState=4</code> and <code class="literal">request.status=200</code>; we have looked at this in <a class="link ng-scope" href="#" linkend="ch04" ng-click="changePageInner($event)">Chapter 4</a>, <span class="emphasis"><em>AJAX Calls with JSON Data</em></span>, while making asynchronous calls using JavaScript.</p></div><p>The following <a id="id198" class="indexterm"></a>is the <a id="id199" class="indexterm"></a>output:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_05_07.jpg" class="img-responsive"></div><p>In the console window, we can view the JSON feed response that comes back from the server. This JSON feed contains a lot of information, as it gets the data for all the students. Now let us fetch the student records based on the ZIP code. For this example, we will be using the <code class="literal">zip_code</code> parameter and will asynchronously pass a value to the server via the HTTP <code class="literal">GET</code> method. This API call will serve the purpose for data vendors who want to search for interns who are available in a specific area.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_05_08.jpg" class="img-responsive"></div><p>In the previous example, <a id="id200" class="indexterm"></a>we start by <a id="id201" class="indexterm"></a>importing the jQuery library and we bind a callback to ready the event that is fired when the <a id="id202" class="indexterm"></a>document has loaded. It is important to notice that we are sending a key-value pair for the <a id="id203" class="indexterm"></a>ZIP code using the <code class="literal">data</code> property in line 12.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_05_09.jpg" class="img-responsive"></div><p>Once the call is fired, we log the response to the console window. The ZIP code <code class="literal">08810</code> matches one user, and the student <a id="id204" class="indexterm"></a>information is being passed back via the <a id="id205" class="indexterm"></a>JSON feed. Targeted searches help us narrow down our <a id="id206" class="indexterm"></a>results, thereby providing us with the data that we are looking for; <a id="id207" class="indexterm"></a>the next target search in line would be to retrieve data using a certain class that a student is enrolled in.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_05_10.jpg" class="img-responsive"></div><p>The previous example is the same as the <a id="id208" class="indexterm"></a>targeted search with ZIP code; <a id="id209" class="indexterm"></a>here we are replacing the ZIP code information with the class information. <a id="id210" class="indexterm"></a>We are retrieving all the students who have <a id="id211" class="indexterm"></a>enrolled for <code class="literal">Economics</code>.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_05_11.jpg" class="img-responsive"></div><p>The targeted search <a id="id212" class="indexterm"></a>returns student <a id="id213" class="indexterm"></a>information for those who have enrolled for an Economics class. Now let us target <a id="id214" class="indexterm"></a>our search <a id="id215" class="indexterm"></a>with a combination of class and ZIP code.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_05_12.jpg" class="img-responsive"></div><p>In the previous example, we <a id="id216" class="indexterm"></a>add the class and <a id="id217" class="indexterm"></a>the ZIP code key-value pairs to send multiple search parameters to the server.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_05_13.jpg" class="img-responsive"></div><p>This call retrieves the student information for students who have enrolled for the <code class="literal">Accounting</code> course and reside in the ZIP code <code class="literal">77082</code>. We have seen multiple examples of making asynchronous calls via the HTTP <code class="literal">GET</code> method; now it is time for us to push the data onto the server in order to add a student using our API. We will be using our <code class="literal">addUser</code> call to add a student on the fly. This helps the development teams to add student information into our database from <a id="id218" class="indexterm"></a>external resources. For example, we are a student information aggregator and we sell <a id="id219" class="indexterm"></a>consolidated student information to multiple data vendors. For us to aggregate all this information, we might be aggregating it via spiders, where a script would go to a website and fetch the data, or external resources, where the data will be unstructured. So <a id="id220" class="indexterm"></a>we will structure our data and use this <code class="literal">addUser</code> API call to ingest the structured student data <a id="id221" class="indexterm"></a>information into our data storage. Simultaneously, we can expose this method to trusted data vendors who would like to store the student information that is not available with us, thereby helping them to make our data storage a single point data location. It is a win-win for both the companies as we get more student information and our data vendors get to store their student information on a remote location. Now let's take a look at how this <code class="literal">addUser</code> post call will be made.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_05_14.jpg" class="img-responsive"></div><p>In this call, we are doing multiple things; we start by declaring a few variables to hold local data. We have local variables that hold string values for the first name and last name of the student, and we also have <a id="id222" class="indexterm"></a>variables that are holding arrays for classes, ZIP codes, and addresses, as Superman has to be at <a id="id223" class="indexterm"></a>multiple locations in a span of few minutes. In our <code class="literal">ajax</code> call, the first change to note is the <code class="literal">type</code> property; as we are pushing a large amount of user data, it is <a id="id224" class="indexterm"></a>common to use the HTTP <code class="literal">POST</code> method. The <a id="id225" class="indexterm"></a>
        <code class="literal">data</code> property is going to use the local <a id="id226" class="indexterm"></a>variables that are declared for the first name, last name, addresses, ZIP codes, and the classes. From the API, when a user is added to the database successfully, we send a success message in response, and that will be logged to our console window.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_05_15.jpg" class="img-responsive"></div><p>Now to verify that the new student has been added to our database, we can run our <code class="literal">getStudents</code> API call to see a list of all the users.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_05_16.jpg" class="img-responsive"></div><p>The last student in the <code class="literal">students</code> feed is <code class="literal">Kent Clark</code>; it is always important to test our code to see that everything is <a id="id227" class="indexterm"></a>working as expected. <a id="id228" class="indexterm"></a>As we are dealing with dynamic data, it is very important to maintain data integrity. <a id="id229" class="indexterm"></a>Whenever a CRUD operation is performed on a user or on their dependencies, the verification for data integrity on that data storage has to be performed by looking at the retrieved data <a id="id230" class="indexterm"></a>and by performing data validation checks.</p></div>
        </section>
        <section id="ch05lvl1sec27"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>The problem with cross-domain AJAX calls</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec27"></a>The problem with cross-domain AJAX calls</h2></div></div><hr></div><p>All the asynchronous calls that <a id="id231" class="indexterm"></a>we have made until now have been on the same server. There are situations where we would want to load data from a different domain, such as fetching data from other APIs. Server-side programs are designed to handle these kinds of calls; we can use cURL to make HTTP calls to different domains to fetch such data. This increases our dependency on server-side programs as we would have to make a call to our server, which would in turn make a call to another domain to fetch the data, which would be returned to a client-side program. It might come across as being a trivial issue, but we are adding an extra layer to our web architecture. To avoid making a <a id="id232" class="indexterm"></a>server-side call, let us try and see if we can make an asynchronous <a id="id233" class="indexterm"></a>call to a different domain. For this example, let us use Reddit's JSON API to fetch the data.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_05_17.jpg" class="img-responsive"></div><p>This is similar to the asynchronous calls that we have made earlier to retrieve data from our <code class="literal">students</code> API. It is important to understand that we did not have to mention the whole URL in the previous cases as we were making a call to the same domain.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_05_18.jpg" class="img-responsive"></div><p>The Reddit site <a id="id234" class="indexterm"></a>provides an excellent JSON API, whereby we can append <code class="literal">.json</code> to the URL and will get the JSON feed for <a id="id235" class="indexterm"></a>that aggregated web page, given that the page is part of Reddit. Let's take a look at the output that is generated when we make this asynchronous call across domains.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_05_19.jpg" class="img-responsive"></div><p>In our asynchronous call, the data would have been logged to the console window, if the request were successful, but we see an error in the console window. The error says that the <code class="literal">XMLHTTPRequest</code> object cannot load the URL that we have provided as it doesn't originate from our <a class="ulink" href="http://www.training.com" target="_blank">www.training.com</a> domain. The <a id="id236" class="indexterm"></a>
        <span class="strong"><strong>same domain policy</strong></span> is a security measure followed by web browsers in order to prevent one domain from accessing information on another domain. Web applications use cookies to store basic information about a user's session so as to provide an intuitive user experience when the user requests the same web page another time or requests a different web page on the same domain. To prevent an <a id="id237" class="indexterm"></a>external website from stealing this information, web browsers follow the <span class="strong"><strong>same origin policy</strong></span>.</p><p>The same domain policy looks for three things in an incoming request; they are the host, the port, and the protocol. If any of them is different from the existing domain, the request will not be completed and the <a id="id238" class="indexterm"></a>cross-domain error is returned.</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; "><colgroup><col align="left"><col align="left"></colgroup><thead><tr><th style="border-bottom: 0.5pt solid ; " align="left" valign="bottom">
        <p>Variant of http://www.training.com</p>
        </th><th style="border-bottom: 0.5pt solid ; " align="left" valign="bottom">
        <p>RESULT</p>
        </th></tr></thead><tbody><tr><td style="" align="left" valign="top">
        <p><code class="literal">http://www.training.com/index.php</code></p>
        </td><td style="" align="left" valign="top">
        <p>PASS</p>
        </td></tr><tr><td style="" align="left" valign="top">
        <p><code class="literal">https://www.training.com/index.php</code></p>
        </td><td style="" align="left" valign="top">
        <p>FAIL (Protocol)</p>
        </td></tr><tr><td style="" align="left" valign="top">
        <p><code class="literal">http://www.training:81.com/index.php</code></p>
        </td><td style="" align="left" valign="top">
        <p>FAIL (Port)</p>
        </td></tr><tr><td style="" align="left" valign="top">
        <p><code class="literal">http://test.training.com.com/index.php</code></p>
        </td><td style="" align="left" valign="top">
        <p>FAIL (Host)</p>
        </td></tr><tr><td style="" align="left" valign="top">
        <p><code class="literal">http://www.differentsite.com/index.php</code></p>
        </td><td style="" align="left" valign="top">
        <p>FAIL (Host)</p>
        </td></tr></tbody></table></div></div>
        </section>
        <section id="ch05lvl1sec28"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Introduction to JSONP</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec28"></a>Introduction to JSONP</h2></div></div><hr></div><p>In order to get around the same <a id="id239" class="indexterm"></a>origin policy, we will be using JSONP, which is JSON with Padding. One exception under the same origin policy is the <code class="literal">&lt;script&gt;</code> tag so scripts can be passed across domains. JSONP uses this exception in order to pass data across domains as a script by adding padding to make the JSON object look like a script. In JavaScript, when a function with a parameter is invoked, we call the function and add a parameter. With JSONP, we pass the JSON feed as a parameter to a function; thereby, we pad our object into a function callback. This function into which the JSON feed has been padded has to be used on the client-side to retrieve the JSON feed. Let's take a quick look at a JSONP example.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_05_20.jpg" class="img-responsive"></div><p>In this example, we are padding the <code class="literal">students</code> object into the <code class="literal">myCallback</code> function and we have to reuse the <code class="literal">myCallback</code> <a id="id240" class="indexterm"></a>function in order to retrieve the <code class="literal">students</code> object. Now that we understand how JSONP works, let's use Reddit's JSON API to fetch the data. We need to make one change to the way we access the data—we need to find a way to pad the feed into a callback that can be used on the client-side. The Reddit website provide a <code class="literal">jsonp</code> <code class="literal">GET</code> parameter <a id="id241" class="indexterm"></a>that will take the name of <a id="id242" class="indexterm"></a>the callback to provide the data.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_05_21.jpg" class="img-responsive"></div></div>
        </section>
        <section id="ch05lvl1sec29"
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Implementing JSONP</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec29"></a>Implementing JSONP</h2></div></div><hr></div><p>We are using the same URL as <a id="id243" class="indexterm"></a>before to fetch the data, but we have added the <code class="literal">jsonp</code> parameter and are setting it to <code class="literal">getRedditData</code>; it is important to note that the feed is now padded into our callback <code class="literal">getRedditData</code>. Now let's replace the URL property in our earlier script to create a new script that will fetch us the JSON feed.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_05_22.jpg" class="img-responsive"></div><p>A few properties such as <code class="literal">url</code> and <code class="literal">dataType</code> have been modified and a few new properties such as <code class="literal">contentType</code> and <code class="literal">jsonpCallback</code> have been added. We have already discussed the change in the <code class="literal">url</code> property, <a id="id244" class="indexterm"></a>so let us look at the other properties.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_05_23.jpg" class="img-responsive"></div><p>Earlier, the <code class="literal">dataType</code> property <a id="id245" class="indexterm"></a>was set to <code class="literal">json</code> as the incoming feed was of type <code class="literal">json</code>, but now the JSON feed is being padded into a callback, and it has to be switched so that the browser expects a callback rather than JSON itself. The new properties that have been added are <code class="literal">contentType</code> and <code class="literal">jsonpCallback</code>; the property <code class="literal">contentType</code> specifies the type of content being sent to the web server. <code class="literal">jsonpCallback</code> takes the name of the callback function into which the JSON feed has been padded.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_05_24.jpg" class="img-responsive"></div><p>When the script is fired, the data from the <a id="id246" class="indexterm"></a>
        <code class="literal">getRedditData</code> callback has been retrieved and is passed over into the <code class="literal">success</code> property that logs our JSON object onto the console window. An important fact to make a note of is that a JSONP call is a script call and not an XHR request, so the JSONP call will be <a id="id247" class="indexterm"></a>available in the <code class="literal">JS</code> or <code class="literal">&lt;scripts&gt;</code> tab and not in the <code class="literal">XHR</code> tab of the console window.</p></div>
        </section>
        <section id="ch05lvl1sec30"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Summary</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch05lvl1sec30"></a>Summary</h2></div></div><hr></div><p>HTTP <code class="literal">GET</code> and <code class="literal">POST</code> request methods are two of the most popular HTTP methods that are used to transfer data from clients to servers. This chapter provides an in-depth understanding of how <code class="literal">GET</code> and <code class="literal">POST</code> request methods are used to transfer data using asynchronous requests. We then proceeded to look at what the issues are with cross-domain asynchronous requests; we used the exception of the <code class="literal">&lt;script&gt;</code> tag to perform our JSONP asynchronous script calls to fetch the data from a different domain. In the next chapter, we will be building our photo gallery application.</p></div>
        </section>
        <section id="ch06"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Chapter&nbsp;6.&nbsp;Building the Carousel Application</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="ch06"></a>Chapter&nbsp;6.&nbsp;Building the Carousel Application</h2></div></div></div><p>We have come a long way in our journey to master JavaScript and JSON; it is time to get busy and build an end-to-end project that is powered by JSON. In our journey, we have come across a variety of concepts such as JavaScript, JSON, the use of server-side programming, AJAX, and JSONP. In this photo gallery application, let us put all of these to use. We will be building a rotating notification board application, which should display the top students for the month. This application should provide the Carousel functionality, such as navigational buttons, auto play of content, displaying a single item at a given point, and keeping track of the first and last piece of content.</p></div>
        </section>
        <section id="ch06lvl1sec31"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Setting up the application</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec31"></a>Setting up the application</h2></div></div><hr></div><p>Let us begin by building a folder that will hold the files for this application. This application will need an HTML file that will hold the Carousel; it will need a few libraries such as jQuery and jQuery Cycle. We will have to import these libraries; we also need a JSON file that holds the data for this exercise. To download the jQuery file, please visit <a class="ulink" href="http://www.jquery.com" target="_blank">http://www.jquery.com</a>. As we have already observed, jQuery is the most popular JavaScript library available to developers. There is a growing community of developers who make jQuery more and more popular by the day. We will be using the jQuery Cycle library to power our Carousel application. The jQuery Cycle is one the most popular and lightweight cycle libraries with numerous features; it can be downloaded from <a class="ulink" href="http://malsup.github.io/jquery.cycle.all.js" target="_blank">http://malsup.github.io/jquery.cycle.all.js</a>.</p><p>These files have to be in a folder inside your document root; in this project we will be working with a live Apache Server, and we will be ingesting the JSON feed via AJAX. The following is an example of how the folder should look once the files have been added:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_06_01.jpg" class="img-responsive"></div><p>Now that we have the libraries arranged in the document root, let us work on the basic HTML file that will import these files into the web page, as shown in the following screenshot:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_06_02.jpg" class="img-responsive"><div class="caption"><p>index-v1.html</p></div></div><p>This is our initial index web page that will load the JavaScript files onto the web page. When this file is fired up via a web browser, both the JavaScript libraries have to be loaded and <code class="literal">ready</code> should be printed onto the console window. Now, let's move forward and build our Carousel application. Next in the line of requirements is the data file; it will be similar to the <code class="literal">students</code> JSON feed that we have worked with in our previous chapters. Rather than printing them all in a single line, we will be loading them into a rotator application.</p></div>
        </section>
        <section id="ch06lvl1sec32"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Building the JSON file for the Carousel application</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec32"></a>Building the JSON file for the Carousel application</h2></div></div><hr></div><p>Let us assume that we are an educational institution, and we have a tradition of acknowledging the efforts of our students on a monthly basis. We will pick the top students from each course for that month, and display their names on our notice board rotator application. This notice board rotator application has often served as a motivation for other students, who always aim to get themselves onto that board. This is the way our educational institution is encouraging the students to do well in their courses. The example JSON feed will look like the following screenshot:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_06_03.jpg" class="img-responsive"></div><p>For our notice board rotator application, we will need basic student information, such as the first name, last name, current level of education, and the course that they have excelled in.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_06_04.jpg" class="img-responsive"><div class="caption"><p>index-v2.html</p></div></div><p>In the preceding screenshot, we are using jQuery's <code class="literal">getJSON()</code> function to bring the JSON feed into the document. When the <code class="literal">index-v2.html</code> file is loaded into the browser, the <code class="literal">students</code> JSON object array will be loaded onto the console window. It is about time to start extracting data from the JSON object, and to start embedding them onto the DOM. Let's use the jQuery <code class="literal">each()</code> function to loop over the <code class="literal">students</code> JSON feed and load the data onto the page.</p><p>The <code class="literal">each()</code> function in jQuery is similar to the <code class="literal">foreach()</code> iterative loop, which is available with the popular server-side languages, and the <code class="literal">for in()</code> iterative loop, which is available in the native JavaScript. The <code class="literal">each()</code> iterator takes the data as its first argument, and passes the <code class="literal">each</code> item in that data iteratively as a single key-value pair into a callback. This callback is a collection of a number of scripts that are executed on that key-value pair. In this callback, we are building the HTML file that will be appended to a <code class="literal">div</code> element on the DOM. We are using this callback to iteratively build the HTML file for all the elements that exist in that <code class="literal">students</code> JSON object.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_06_05.jpg" class="img-responsive"><div class="caption"><p>index-v3.html</p></div></div><p>In the <code class="literal">index-v3.html</code> file, we are using the jQuery <code class="literal">each()</code> function to iterate through the <code class="literal">students</code> JSON feed, and build the HTML file that will display the student information, such as the first name, last name, the year of college, and the course that they are enrolled in. We are building the dynamic HTML and assigning it to the <code class="literal">html</code> variable. The data in the <code class="literal">html</code> variable will be added later to the <code class="literal">div</code> element with an ID of <code class="literal">students</code>. This is shown in the following screenshot:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_06_06.jpg" class="img-responsive"></div><p>The proceeding screenshot shows the output of the <code class="literal">index-v3.html</code> body:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_06_07.jpg" class="img-responsive"></div><p>When the script is loaded into a web browser, the script checks to see if the document is ready. Once the document is ready, an AJAX call is made to the server to retrieve the JSON data. Once the JSON data is retrieved, each object in the <code class="literal">students</code> JSON object array feed will be passed into the callback that generates an HTML <code class="literal">div</code> element with a class <code class="literal">student</code>. This repeats until the callback is run on the last element, and once the callback is executed on the last element, this HTML file will be appended to a <code class="literal">div</code> element in the HTML with an ID of <code class="literal">students</code>.</p></div>
        </section>
        <section id="ch06lvl1sec33"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Creating the Carousel application with jQuery Cycle</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec33"></a>Creating the Carousel application with jQuery Cycle</h2></div></div><hr></div><p>We have developed a web page that loads all the student data into an HTML file; now it is time to build the Carousel application using this data. We will be using a jQuery Cycle plugin to rotate the student information on our notice board application. The jQuery Cycle is a slideshow plugin that supports various types of transition effects on multiple browsers. Effects such as <code class="literal">fade</code>, <code class="literal">toss</code>, <code class="literal">wipe</code>, <code class="literal">zoom</code>, <code class="literal">scroll</code>, and <code class="literal">shuffle</code> are available. The plugin also supports the interesting pause on hover feature; click triggers and response callbacks are also supported.</p><p>For our Carousel example, let's keep it simple and use the basic options, such as a fade effect to rotate the students, enabling the pause so that whenever a user hovers onto the cycle, the rotator application is paused to display the information of the current student. Finally, we will be setting the speed and the timeout values that will determine how much time it will take to transition from one student to another.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_06_08.jpg" class="img-responsive"><div class="caption"><p>index-v4.html</p></div></div><p>In the preceding screenshot, we set up the <code class="literal">cycle</code> plugin, and added the <code class="literal">cycle</code> plugin to the <code class="literal">div</code> element of <code class="literal">students</code>. The <code class="literal">cycle</code> plugin takes a JSON object as its parameter, to add the rotator functionality to a <code class="literal">div</code> element. In this JSON object we have added four properties: <code class="literal">fx</code>, <code class="literal">pause</code>, <code class="literal">speed</code>, and <code class="literal">timeout</code>. <code class="literal">fx</code> determines the effect that is performed on the <code class="literal">html</code> element. <code class="literal">fade</code> is a prominent effect that is used for the <code class="literal">cycle</code> plugin. The other popular effects that are supported by the jQuery Cycle plugin are shuffle, zoom, turndown, scrollRight, and curtainX. The second property we are using is the <code class="literal">pause</code> property, this determines whether the rotation has stopped when the user hovers onto the <code class="literal">rotator</code> element; it takes a true and false value to determine if the rotation can be paused or not. We could either supply a Boolean value such as True or False, or pass one or zero that signify True and False respectively. The next two properties are <code class="literal">speed</code> and <code class="literal">timeout</code>; they determine the speed with which the rotation occurs and how much time it will take before the next item is displayed. When the web page with the updated script is loaded into a web browser, the whole <code class="literal">students</code> object is parsed into a local JavaScript string variable and is appended to the DOM, and only the first element in that rotator object is displayed while the rest of them are hidden. This functionality is handled behind-the-scenes by the <code class="literal">cycle</code> plugin. The following screenshot displays a Carousel generated from the earlier code sample:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_06_09.jpg" class="img-responsive"></div><p>Let us enhance the user experience of this page by adding the earlier and following handlers to give the users custom controllers to handle the rotator functionality, as shown in the following screenshot:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_06_10.jpg" class="img-responsive"><div class="caption"><p>index-v5.html</p></div></div><p>In the <code class="literal">cycle</code> object, we are adding two new properties called <code class="literal">prev</code> and <code class="literal">next</code>. The values for the <code class="literal">prev</code> and <code class="literal">next</code> properties will be the HTML <code class="literal">id</code> attributes of elements that are on the DOM. The HTML file has to be modified as follows in order to handle this change:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_06_11.jpg" class="img-responsive"></div><p>In the preceding screenshot, we have added two anchor element with <code class="literal">id</code> values of <code class="literal">prev</code> and <code class="literal">next</code> that are being referenced in the <code class="literal">cycle</code> object.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_06_12.jpg" class="img-responsive"></div><p>The <span class="strong"><strong>Prev</strong></span> and <span class="strong"><strong>Next</strong></span> links that are shown in the preceding screenshot are going to handle the rotation of our notice board rotation application. This is a quick way of building a Carousel application that is powered by jQuery and JSON. This example can used to build more complex Carousel applications that can contain images and videos for the photo and video gallery Carousel applications respectively.</p></div>
        </section>
        <section id="ch06lvl1sec34"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Summary</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch06lvl1sec34"></a>Summary</h2></div></div><hr></div><p>In this chapter we put our JavaScript, jQuery, and JSON knowledge to work, and built up a neat little Carousel notice board rotator application. We went through a step-by-step process to ingest the data feed, build a dynamic template on the fly from that data feed, append the data feed to a <code class="literal">div</code> element, and then bind the <code class="literal">div</code> element to the <code class="literal">cycle</code> plugin. This notice board rotator application gives us an insight to bigger Carousel projects that can be developed with very little development effort. In the next chapter, we will look at the alternative implementations of JSON.</p></div>
        </section>
        <section id="ch07"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Chapter&nbsp;7.&nbsp;Alternate Implementations of JSON</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="ch07"></a>Chapter&nbsp;7.&nbsp;Alternate Implementations of JSON</h2></div></div></div><p>In the chapters until now, we have worked with JSON as an HTTP data interchange format; now let's look at the popular alternate methods in which JSON is being used. In the last few years, there has been a <a id="id248" class="indexterm"></a>sharp rise in the number of software modules and packages across all programming and scripting languages. Crowdsourcing software development has been on an upward climb. Web-based hosting services such as SourceForge, Pastebin, and GitHub have gained popularity in the last few years, and they have opened up doors for developers to collaborate and contribute back to the community. These modules and packages can be independently integrated or can be used as dependent programs with an existing software framework. This behavior has been a common practice in the open source community where developers can work independently to contribute software packages that enhance the frameworks that they are working with.</p><p>Scripting languages such as <a id="id249" class="indexterm"></a>PHP, Python, and JavaScript have a huge number of contributed software packages and modules. The advantage here is to use a prebuilt software package that provides certain functionality out of the box and has been heavily tested by the community. The flip side of introducing a single framework or multiple frameworks into a software project is having to understand how these frameworks are loaded into the project, how they can be accessed from different sections in the current project, whether these frameworks have any dependencies, and finally, how they affect the whole project. These issues can be addressed by using a <span class="strong"><strong>dependency manager</strong></span>.</p><p>A dependency manager <a id="id250" class="indexterm"></a>is a software program that keeps track of all the necessary base programs that are required for a dependent program to run. A common practice in a software development life cycle is to perform unit tests by using a unit-testing framework; the unit-testing framework in turn might need some base libraries to be installed or there might be a few settings to enable the use of that framework.</p><p>These operations are often handled by writing up quick scripts, but as the project grows bigger, the dependencies grow along with the project. Along the same lines, tracking these changes and making sure different teams working on the project get these updates, which is done by scripts, is a <a id="id251" class="indexterm"></a>tough task. By introducing a dependency manager, we will be automating the whole process, which adds consistency and saves time.</p></div>
        </section>
        <section id="ch07lvl1sec35"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Dependency management</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec35"></a>Dependency management</h2></div></div><hr></div><p>Dependency management has <a id="id252" class="indexterm"></a>often been a little rocky, and for new developers who are coming in, adding new frameworks into their projects, setting up their projects, and getting them to run can be daunting. A dependency manager like Composer for <a id="id253" class="indexterm"></a>PHP solves this issue. It is considered the "glue between all projects", and there is a good reason for that. Composer uses JSON to keep a track of all the dependencies for a given project. Composer's primary job is to download libraries from remote locations and store them locally. To inform Composer as to what libraries we need, we would need to set up the <a id="id254" class="indexterm"></a>
        <code class="literal">composer.json</code> file. This file keeps a track of all the specific libraries, their versions, and the environments that a given library should be deployed to. For example, a unit-testing framework library should never make it to production. There was an instance in an old company where a colleague of mine who was randomly testing our production instance deleted the whole user table by running a unit test; we had to recover the whole user table from the previous night's database back ups.</p><p>Let's quickly dive in and see how <a id="id255" class="indexterm"></a>JSON is being used to handle dependency management.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_07_01.jpg" class="img-responsive"><div class="caption"><p>composer.json</p></div></div><p>In the <code class="literal">composer.json</code> file, we <a id="id256" class="indexterm"></a>are adding two requirements to install a specific version of PHP and PHPUnit. Once the file is added to the project, we can use Composer's <code class="literal">install</code> command to <a id="id257" class="indexterm"></a>install these dependencies. <a id="id258" class="indexterm"></a>Composer <a id="id259" class="indexterm"></a>also <a id="id260" class="indexterm"></a>comes with an <code class="literal">update</code> command that takes care of any updates that are made for a given package.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note22"></a>Note</h3><p>For more information about Composer, please visit <a class="ulink" href="http://www.getcomposer.org" target="_blank">http://www.getcomposer.org</a>.</p></div><p><code class="literal">Node.js</code> is a <a id="id261" class="indexterm"></a>popular software platform that uses the JSON data format for tracking dependencies. <a id="id262" class="indexterm"></a>
        <span class="strong"><strong>Node Packaged Modules</strong></span> (<span class="strong"><strong>NPM</strong></span>) is the package manager that developers use for installing and integrating external modules into their code. For every <code class="literal">Node.js</code> project, there is a <code class="literal">package.json</code> file in the document root that keeps track of all the metadata, such as the name of the project, the name of the author, the version number, the required modules to run that project, and the <a id="id263" class="indexterm"></a>underlying daemons or engines that are required to run the project. Let's take a peek at an example <code class="literal">package.json</code> file <a id="id264" class="indexterm"></a>from one of my <code class="literal">Node.js</code> projects.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_07_02.jpg" class="img-responsive"><div class="caption"><p>package.json</p></div></div><p>The <code class="literal">package.json</code> file <a id="id265" class="indexterm"></a>is a big JSON object that keeps a track of metadata, such as the project's name, author's details, and the required modules.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note23"></a>Note</h3><p>For more information about <a id="id266" class="indexterm"></a>NPM, please visit <a class="ulink" href="https://www.npmjs.org" target="_blank">https://www.npmjs.org</a>.</p></div></div>
        </section>
        <section id="ch07lvl1sec36"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>JSON for storing metadata</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec36"></a>JSON for storing metadata</h2></div></div><hr></div><p>On the same line as dependency <a id="id267" class="indexterm"></a>managers, JSON is also used to store metadata for software projects. Prior to JSON becoming popular, the configurations and metadata were either stored in a text file or in language-specific files, such as <code class="literal">config.php</code> for PHP, <code class="literal">config.py</code> for Python, and <code class="literal">config.js</code> for JavaScript. All these can now be replaced by a <a id="id268" class="indexterm"></a>language-independent <code class="literal">config.json</code> file; use a JSON library for non-JavaScript libraries to parse it. Let's take a quick look at an example <code class="literal">config.json</code> file:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_07_03.jpg" class="img-responsive"><div class="caption"><p>config.json</p></div></div><p>In the <code class="literal">config.json</code> file, we <a id="id269" class="indexterm"></a>store the metadata as a JSON object. We are specifying important information such as the project name, the environment of the project (which varies based on the server that the file is located on), any classes that have to be autoloaded during bootstrapping the application, and any classes or folders that we would want to exclude. Finally, using the <a id="id270" class="indexterm"></a>
        <code class="literal">RECURSIVE</code> key, we also specify that there are folders and those folders have files.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note24"></a>Note</h3><p>Bootstrapping is the startup process for an application, in which we prepare that application to serve its purpose.</p></div><p>Once we have the <a id="id271" class="indexterm"></a>
        <code class="literal">config.json</code> file available, we can use the <code class="literal">json.loads</code> method in Python or we can use the <a id="id272" class="indexterm"></a>
        <code class="literal">json_decode</code> method in PHP to parse through the config object to retrieve the data. The JSON objects can also be used to store the database schema; this helps the rest of the development team to update their database schema when one developer on the team makes a change to the database. A smart way to handle this would be by writing a trigger on this <code class="literal">schema.json</code> file, and if there is an update to that file, the schema in the database has to be updated to reflect the new changes via the database migration scripts. Let's take a quick look at an example <a id="id273" class="indexterm"></a>
        <code class="literal">schema.json</code> file.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_07_04.jpg" class="img-responsive"><div class="caption"><p>schema.json</p></div></div><p>In the <code class="literal">schema.json</code> example, we are building the schema JSON object that will store the database schema information. <code class="literal">client</code> is the name of the table in our schema. The <code class="literal">client</code> table has three columns—the <a id="id274" class="indexterm"></a>ID, name, and status of the client, that is, whether the client is enabled or disabled. Each of the columns contains the column JSON object that provides the schema information, such as the datatype and size of the column, whether it has a default value or a primary key constraint.</p></div>
        </section>
        <section id="ch07lvl1sec37"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Comparisons with YAML</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec37"></a>Comparisons with YAML</h2></div></div><hr></div><p>YAML is another software language-agnostic data interchange format that is slowly gaining popularity. <a id="id275" class="indexterm"></a>
        <span class="strong"><strong>YAML</strong></span> is a recursive acronym for <span class="strong"><strong>YAML Ain't Markup Language</strong></span>, and is commonly used to store metadata such as configurations, schemas, and properties. YAML is considered a human-readable data serialization standard and depends on white spaces, positioning, and simple characters for line terminators, similar to popular scripting languages such as Ruby and Python. YAML is particular about the spacing between the elements and is not tab friendly. Similar to JSON, YAML key/value pairs are separated by a colon. Similar to text formatting, hyphens are used to indicate list items, unlike JSON where the list items are placed in an array or a child object. Since YAML is software language-agnostic, we would need parsers to understand the contents in that file. Such parsers are available for most of the popular languages such as PHP, Python, C++, Ruby, and JavaScript. <a id="id276" class="indexterm"></a>Let's build the <a id="id277" class="indexterm"></a>
        <code class="literal">config.json</code> file in <a id="id278" class="indexterm"></a>YAML to understand what YAML is.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_07_05.jpg" class="img-responsive"><div class="caption"><p>config.yaml</p></div></div><p>Similar to our config JSON object, the YAML file contains all the data; the difference is in how the data is being arranged—as a list of items—and in how spacing and positioning are used to arrange lists of data. There are multiple YAML resources that are available on the Internet to validate, serialize, and unserialize the YAML data.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note25"></a>Note</h3><p>For more information about <a id="id279" class="indexterm"></a>YAML, please visit <a class="ulink" href="http://www.yaml.org" target="_blank">http://www.yaml.org</a>, which is represented in YAML format.</p></div></div>
        </section>
        <section id="ch07lvl1sec38"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Summary</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch07lvl1sec38"></a>Summary</h2></div></div><hr></div><p>JSON is quickly becoming the most popular data interchange format on the Internet, but it is not limited to data exchange. We can also use JSON to store metadata for dependency managers, package managers, configuration managers, and schema data stores. We were introduced to YAML, which is considered as an alternative to JSON. In the next chapter, we will look at the different resources that we can use to debug, validate, and format JSON.</p></div>
        </section>
        <section id="ch08"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Chapter&nbsp;8.&nbsp;Debugging JSON</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="ch08"></a>Chapter&nbsp;8.&nbsp;Debugging JSON</h2></div></div></div><p>JSON has grown leaps and <a id="id280" class="indexterm"></a>bounds in the last few years, due to which there is an abundance of freely available resources to understand the JSON object we are working with. As we have discussed earlier, JSON can be used for multiple purposes, and it is important to understand the simple things that might break JSON, such as ignoring double quotes, or a trailing comma on the last item in the JSON object, or the wrong content-type being sent over by the web server. In this chapter, let us go over the different ways, in which we can debug, validate, and format JSON.</p></div>
        </section>
        <section id="ch08lvl1sec39"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Using the developer tools</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec39"></a>Using the developer tools</h2></div></div><hr></div><p>Almost all of the top browsers, <a id="id281" class="indexterm"></a>such as Mozilla Firefox, Google Chrome, Safari, and Internet Explorer, have powerful debugging tools that help us understand the requests that are being made, and the responses that are coming back. JSON could either be part of the request, or be part of the response. Google Chrome, Safari and newer versions of Internet Explorer are shipped out with built-in developer tools. Firebug is a very <a id="id282" class="indexterm"></a>popular web development toolkit that is available for Mozilla Firefox. Firebug is an external plugin and has to be installed on the browser; it is one of the earliest web development toolkits that was built to assist web developers while using Firefox.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note26"></a>Note</h3><p>To install Firebug, please <a id="id283" class="indexterm"></a>visit <a class="ulink" href="http://getfirebug.com/" target="_blank">http://getfirebug.com/</a>, and click on <span class="strong"><strong>Install Firebug</strong></span> on the landing page.</p></div><p>These developer tools provide access to the HTML DOM tree, and give us a real-time understanding of how the HTML elements are arranged on the page. The developer tools come with a network (or <span class="strong"><strong>Net</strong></span>) tab that allows us to keep a track of all the resources such as the images, JavaScript files, CSS files, flash media, and any asynchronous calls that the client is making. The console window is another popular feature that is built into the developer tools. As the name suggests, this window provides us a runtime JavaScript console to test any on-the-fly scripts. To fire up the developer tools on Firefox, load the web page into a web browser, and right-click on the web page; this will give us a list of options, choose <span class="strong"><strong>Inspect Element</strong></span> <a id="id284" class="indexterm"></a><span class="strong"><strong>with Firebug</strong></span>. To load the developer tools on Google Chrome and Safari, right-click on a web page and click on <a id="id285" class="indexterm"></a>
        <span class="strong"><strong>Inspect Element</strong></span> from the list of the options. When working on Safari, keep in mind that the developer tools have to be enabled; to enable the developer tools, click on the <span class="strong"><strong>Safari</strong></span> menu item, choose <span class="strong"><strong>Preferences</strong></span> and click on the <span class="strong"><strong>Advanced</strong></span> tab, and check <span class="strong"><strong>Show develop menu in menu Bar</strong></span> to view the developer tools. On Internet Explorer, hit the <span class="emphasis"><em>F12</em></span> key on your keyboard to fire up the developer tools window. In <a class="link ng-scope" href="#" linkend="ch04" ng-click="changePageInner($event)">Chapter 4</a>, <span class="emphasis"><em>AJAX Calls with JSON Data</em></span>, we made our first asynchronous call to a live web server <a id="id286" class="indexterm"></a>to request the JSON data using jQuery. Let us use that program and debug the data using developer tools; for this example we will be using the Firefox web browser:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_08_01.jpg" class="img-responsive"><div class="caption"><p>jquery-ajax.html</p></div></div><p>On page load, when a user right-clicks and chooses the <span class="strong"><strong>Inspect Element with Firebug</strong></span> option, the <span class="strong"><strong>HTML</strong></span> tab is loaded up by default and the user gets to see the HTML DOM. In our example, we had bound a <code class="literal">click</code> event handler to the <span class="strong"><strong>Get Feed</strong></span> button. Let us look at the console output after the button was <a id="id287" class="indexterm"></a>clicked; to view the output in the console window, click on the <span class="strong"><strong>Console</strong></span> tab:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_08_02.jpg" class="img-responsive"></div><p>Once the response is retrieved, the JSON feed is logged into the <span class="strong"><strong>Response</strong></span> tab on the console window. It is important to understand the JSON feed in order to parse it, and the developer tools' console window provides us a simple way to analyze the JSON feed. Let us continue our research on the developer tools and visit the <span class="strong"><strong>Net</strong></span> tab in Firefox, to understand how the client and the server communicate the content type of data that the client is expecting:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_08_03.jpg" class="img-responsive"></div><p>In the Net window, we should begin by clicking on the URL for the asynchronous call, which is being made to <code class="literal">index.php</code>. Once that link is clicked, in the <span class="strong"><strong>Headers</strong></span> section we should observe the <span class="strong"><strong>Accept</strong></span> header, which is expecting the <code class="literal">application/json</code> <span class="strong"><strong>Multipurpose Internet Mail Extensions</strong></span> (<span class="strong"><strong>MIME</strong></span>) type, and the <a id="id288" class="indexterm"></a>
        <span class="strong"><strong>X-Requested-With</strong></span> header is <span class="strong"><strong>XMLHttpRequest</strong></span>, <a id="id289" class="indexterm"></a>which notifies <a id="id290" class="indexterm"></a>that this is an asynchronous request. The <span class="strong"><strong>Response</strong></span> tab in the Net window is the same as the <a id="id291" class="indexterm"></a>
        <span class="strong"><strong>Response</strong></span> tab in the console window, and it will display the JSON feed for this request. Throughout this book, we have extensively used the <code class="literal">console.log</code> method that prints the data onto the console window, which is another helpful feature of the developer tools.</p></div>
        </section>
        <section id="ch08lvl1sec40"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Validating JSON</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec40"></a>Validating JSON</h2></div></div><hr></div><p>Similar to our debugging resources, <a id="id292" class="indexterm"></a>there are a lot of popular web tools that help us with validating <a id="id293" class="indexterm"></a>JSON that we build. <span class="strong"><strong>JSONLint</strong></span> is one of the most popular web tools that are available for validating our JSON feeds.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note27"></a>Note</h3><p>When we are using a server-side program such as PHP, Python, or Java, the built-in JSON encoding libraries generate the JSON feed, and normally the feed will be a valid JSON feed.</p></div><p>JSONLint has a very straightforward interface that allows the user to paste the JSON they want to validate, and returns either a success message or an error message based on the JSON feed that we paste. Let us begin by validating a bad piece of JSON to see the error message that would be returned, and then let us fix it to view the success message. For this example, I will copy the <code class="literal">students</code> feed from the previous example, and add a trailing comma at the end of the second element:</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_08_04.jpg" class="img-responsive"></div><p>Notice that we have added a trailing comma to the last item in our JSON object, and the best part about JSONLint is the descriptive error message. We have encountered a <span class="strong"><strong>Parse error</strong></span>, and to make life simple, the message also gives us the line number where the error could be. The parser is expecting a string, or a number, or a null, or a Boolean value, and because we have supplied none, we are encountering this error. In order to fix this error, we will either have to add a new item to that <a id="id294" class="indexterm"></a>JSON object to justify the comma, or we will have to get rid of the comma, as there are no items ahead.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_08_05.jpg" class="img-responsive"></div><p>As soon as we remove the trailing comma and validate it, we get the success message. Ease of use and descriptive messages have made JSONLint one of the goto websites for JSON validation.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note28"></a>Note</h3><p>To work with JSONLint, <a id="id295" class="indexterm"></a>please visit <a class="ulink" href="http://www.jsonlint.com" target="_blank">http://www.jsonlint.com</a>.</p></div></div>
        </section>
        <section id="ch08lvl1sec41"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Formatting JSON</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec41"></a>Formatting JSON</h2></div></div><hr></div><p>JSONLint is not just an online <a id="id296" class="indexterm"></a>JSON validator, it also helps us format JSON and makes it look pretty. Often JSON feeds are big in size, and an online editor that provides a tree structure to traverse through the JSON object is always helpful. <span class="strong"><strong>JSON Editor Online</strong></span> is one of <a id="id297" class="indexterm"></a>my favorite online editors to work with and format the big JSON objects, as it provides an easy to navigate tree structure.</p><div class="mediaobject"><img src="https://www.packtpub.com/graphics/9781783286034/graphics/6034OS_08_06.jpg" class="img-responsive"></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title"><a id="note29"></a>Note</h3><p>To work with JSON Editor <a id="id298" class="indexterm"></a>Online, please visit <a class="ulink" href="http://www.jsoneditoronline.org" target="_blank">http://www.jsoneditoronline.org</a>.</p></div><p>We begin by pasting our JSON <a id="id299" class="indexterm"></a>example code into the window on the left-hand side, and click on the right arrow button in the middle to generate our tree structure. Once we make the changes to the tree structure, we can click on the left arrow button to format our data, making it ready to use elsewhere.</p></div>
        </section>
        <section id="ch08lvl1sec42"><!--?xml version="1.0" encoding="UTF-8"?-->

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Summary</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><div class="section" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ch08lvl1sec42"></a>Summary</h2></div></div><hr></div><p>Debugging, validating, and formatting are three things that developers can never ignore. In this chapter, we have looked at resources such as the developer tool kits for the browsers for debugging, how we can utilize these developer tool kits, and also saw how to use JSONLint for validation and JSON Editor Online for formatting.</p><p>This is the end of <span class="emphasis"><em>JavaScript and JSON Essentials</em></span>, targeted to provide you with an in-depth insight of how data can be stored and transferred in the JSON data format. We have had hands-on experience of transferring JSON via HTTP asynchronous requests within the same domain, and HTTP asynchronous requests across domains. We have also looked at alternative implementations of how the JSON data format can be used. This is a solid start to a long journey of understanding JSON to develop interactive and responsive web applications.</p></div>
        </section>
      </div>

        <div class="col-md-3 col-lg-4 scrollspy hidden-xs hidden-sm">
            <div class="btn-group btn-group-justified" role="group" aria-label=""  style="margin-top:15px;">
              <div class="btn-group" role="group">
                <button type="button" class="btn btn-default active">Contents</button>
              </div>
              <div class="btn-group" role="group">
                <button type="button" class="btn btn-default">Bookmarks</button>
              </div>
            </div>
            <ol class="breadcrumb text-center small bookmark-text" style="margin-top:15px;">
              <li class="active"><i class="fa fa-bookmark" style="margin-right:5px;"></i>Double click to + / - bookmark sections</a></li>
            </ol>

        <ul id="nav" class="nav main" data-spy="affix" data-offset-top="60" data-offset-bottom="200">
          <div class="text-center small" style="margin-top:15px; font-weight:700; color:rgba(0,0,0,0.6);">JavaScript and JSON Essentials</div>
          <div class="form-group" style="margin:15px;"> <input type="text" class="form-control" placeholder="Search this Title..."> </div>
          <div class="text-center small bookmark-text"></div>
          <li>
                <a href="#pref05">Preface</a>

            </li>
            <li>
                <a href="#ch01">1. JavaScript Basics</a>
                <ul class="nav">
                    <li><a href="#ch01lvl1sec08">Variables in JavaScript</a></li>
                    <li><a href="#ch01lvl1sec09">Arrays</a></li>
                    <li><a href="#ch01lvl1sec10">Objects</a></li>
                    <li><a href="#ch01lvl1sec11">The Carousel Application</a></li>
                    <li><a href="#ch01lvl1sec12">Summary</a></li>
                </ul>
            </li>
            <li>
                <a href="#ch02">2. Getting Started with JSON</a>
                <ul class="nav">
                    <li><a href="#ch02lvl1sec13">The Hello World program with JSON</a></li>
                    <li><a href="#ch02lvl1sec14">Datatypes in JSON</a></li>
                    <li><a href="#ch02lvl1sec15">Languages that support JSON</a></li>
                    <li><a href="#ch02lvl1sec16">Summary</a></li>
                </ul>
            </li>
            <li>
                <a href="#ch03">3. Working with Real-time JSON</a>
                <ul class="nav">
                    <li><a href="#ch03lvl1sec17">Accessing objects in JSON</a></li>
                    <li><a href="#ch03lvl1sec18">Performing complex operations</a></li>
                    <li><a href="#ch03lvl1sec19">Modifying JSON</a></li>
                    <li><a href="#ch03lvl1sec20">Summary</a></li>
                </ul>
            </li>
            <li>
                <a href="#ch04">4. AJAX Calls with JSON Data</a>
                <ul class="nav">
                    <li><a href="#ch04lvl1sec21">Requirements for AJAX</a></li>
                    <li><a href="#ch04lvl1sec22">Hosting JSON<i class="fa fa-bookmark pull-right bookmark-icon" style="margin-left:5px;"></i></a></li>
                    <li><a href="#ch04lvl1sec23">Making your first AJAX Call</a></li>
                    <li><a href="#ch04lvl1sec24">Parsing JSON Data</a></li>
                    <li><a href="#ch04lvl1sec25">Summary</a></li>
                </ul>
            </li>
            <li>
                <a href="#ch05">5. Cross-domain Asynchronous Requests</a>
                <ul class="nav">
                    <li><a href="#ch05lvl1sec26">Making GET and POST AJAX calls with JSON data</a></li>
                    <li><a href="#ch05lvl1sec27">The problem with cross-domain AJAX calls</a></li>
                    <li><a href="#ch05lvl1sec28">Introduction to JSONP</a></li>
                    <li><a href="#ch05lvl1sec29">Implementing JSONP</a></li>
                    <li><a href="#ch05lvl1sec30">Summary</a></li>
                </ul>
            </li>
            <li>
                <a href="#ch06">6. Building the Carousel Application</a>
                <ul class="nav">
                    <li><a href="#ch06lvl1sec31">Setting up the application</a></li>
                    <li><a href="#ch06lvl1sec32">Building the JSON file for the Carousel application</a></li>
                    <li><a href="#ch06lvl1sec33">Creating the Carousel application with jQuery Cycle</a></li>
                    <li><a href="#ch06lvl1sec34">Summary</a></li>
                </ul>
            </li>
            <li>
                <a href="#ch07">7. Alternate Implementations of JSON</a>
                <ul class="nav">
                    <li><a href="#ch07lvl1sec35">Dependency management</a></li>
                    <li><a href="#ch07lvl1sec36">JSON for storing metadata</a></li>
                    <li><a href="#ch07lvl1sec37">Comparisons with YAML</a></li>
                    <li><a href="#ch07lvl1sec38">Summary</a></li>
                </ul>
            </li>
            <li>
                <a href="#ch08">8. Debugging JSON</a>
                <ul class="nav">
                    <li><a href="#ch08lvl1sec39">Using the developer tools</a></li>
                    <li><a href="#ch08lvl1sec40">Validating JSON</a></li>
                    <li><a href="#ch08lvl1sec41">Formatting JSON</a></li>
                    <li><a href="#ch08lvl1sec42">Summary</a></li>
                </ul>
            </li>
        </ul>
      </div>
    </div><!--end of .row-->
  </div><!--end of .container-->
  
  <section class="application">
    <div class="container book">
      <h2>What should I do next?</h2>
      <div class="row">
        <div class="col-sm-3 col-lg-2" style="margin-top:20px;">
          <img src="https://www.packtpub.com/sites/default/files/imagecache/ppv4_main_book_cover/6902OS_JavaScript%20JSON%20Cookbook.jpg" class="img-responsive"/>
        </div>
        <div class="col-sm-9 col-lg-10">
          <h3>JavaScript JSON Cookbook</h3>

            <p>If you're writing applications that move structured data from one place to another, this book is for you. This is especially true if you've been using XML to do the job because it's entirely possible that you could do much of the same work with less code and less data overhead in JSON.</p>
            <p>While the book's chapters make some distinction between the client and server sides of an application, it doesn't matter if you're a frontend, backend, or full-stack developer. The principles behind using JSON apply to both the client and the server, and in fact, developers who understand both sides of the equation generally craft the best applications.</p>
                      <button type="button" class="btn btn-primary pull-right">Take a look now</button>

        </div>
      </div><!--end of .row-->
    </div><!--end of .container-->
  </section>
  
  <footer>
    <p class="text-center">© Packt Publishing Limited. All Rights Reserved</p>
  </footer> 

<script src="js/jquery.js"></script>
<script src="js/bootstrap.min.js"></script>
  <script>
$('#nav').affix({
    offset: {
        top: $('#nav').offset().top,
        bottom: $('footer').outerHeight(true) + $('.application').outerHeight(true) + 40
    }
});
//# sourceURL=pen.js
</script>
</body>
</html>